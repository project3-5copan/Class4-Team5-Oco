{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/taehyunpark/Desktop/Work/Class4-Team5-Oco/upbit_clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/taehyunpark/Desktop/Work/Class4-Team5-Oco/upbit_clone/src/Components/Main/MainChart.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    width: 1px;\\n    height: 1px;\\n    clip: rect(0, 0);\\n    clip-path: polygon(0, 0);\\n    overflow: hidden;\\n    text-indent: -9999px;\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 500px;\\n    background-color: white;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { useDispatch } from \"react-redux\";\nimport { startAddMoreCandleData } from \"../../Reducer/coinReducer\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport { elderRay, ema, discontinuousTimeScaleProviderBuilder, Chart, ChartCanvas, CurrentCoordinate, BarSeries, CandlestickSeries, ElderRaySeries, LineSeries, MovingAverageTooltip, OHLCTooltip, SingleValueTooltip, mouseBasedZoomAnchor, XAxis, YAxis, CrossHairCursor, EdgeIndicator, MouseCoordinateX, MouseCoordinateY, ZoomButtons, withDeviceRatio, withSize } from \"react-financial-charts\";\nimport Loading from \"../Global/Loading\";\nimport withOHLCData from \"../../Container/withOHLCData\";\nimport withThemeData from \"../../Container/withThemeData\";\nimport withSelectedOption from \"../../Container/withSelectedOption\";\nimport withLoadingData from \"../../Container/withLoadingData\";\nimport isEqual from \"react-fast-compare\";\n\nvar barChartExtents = function barChartExtents(data) {\n  return data.volume;\n};\n\nvar candleChartExtents = function candleChartExtents(data) {\n  return [data.high, data.low];\n};\n\nvar yEdgeIndicator = function yEdgeIndicator(data) {\n  return data.close;\n};\n\nvar volumeSeries = function volumeSeries(data) {\n  return data.volume;\n};\n\nvar St = {\n  ChartContainer: styled.section(_templateObject()),\n  HiddenH3: styled.h3(_templateObject2())\n};\nvar margin = {\n  left: 10,\n  right: 80,\n  top: 20,\n  bottom: 20\n};\nvar minHeight = 350;\n\nvar MainChart = function MainChart(_ref) {\n  var initialData = _ref.data,\n      height = _ref.height,\n      width = _ref.width,\n      ratio = _ref.ratio,\n      selectedTimeType = _ref.selectedTimeType,\n      theme = _ref.theme,\n      isCandleLoading = _ref.isCandleLoading;\n  if (height > 500) height = 500;\n  var dispatch = useDispatch();\n  var dateTimeFormat = selectedTimeType === \"days\" || selectedTimeType === \"weeks\" ? \"%y-%m-%d\" : \"%y-%m-%d %H:%M\";\n  var timeDisplayFormat = timeFormat(dateTimeFormat);\n  var pricesDisplayFormat = format(\"\");\n\n  var openCloseColor = function openCloseColor(data) {\n    return data.close > data.open ? theme.priceUp : theme.priceDown;\n  };\n\n  var volumeColor = function volumeColor(data) {\n    return data.close > data.open ? theme.priceUpTrans : theme.priceDownTrans;\n  };\n\n  var xScaleProvider = discontinuousTimeScaleProviderBuilder().inputDateAccessor(function (d) {\n    return d.date;\n  });\n  var ema12 = ema().id(1).options({\n    windowSize: 12\n  }).merge(function (d, c) {\n    d.ema12 = c;\n  }).accessor(function (d) {\n    return d.ema12;\n  });\n  var ema26 = ema().id(2).options({\n    windowSize: 26\n  }).merge(function (d, c) {\n    d.ema26 = c;\n  }).accessor(function (d) {\n    return d.ema26;\n  });\n  var elder = elderRay();\n  var calculatedData = elder(ema26(ema12(initialData)));\n\n  var _xScaleProvider = xScaleProvider(calculatedData),\n      data = _xScaleProvider.data,\n      xScale = _xScaleProvider.xScale,\n      xAccessor = _xScaleProvider.xAccessor,\n      displayXAccessor = _xScaleProvider.displayXAccessor; // 확대 축소 초기 범위를 정하는 xExtendts설정, max와 min이 변하면 새로운 데이터 추가시 줌 설정이 풀린다\n\n\n  var max = xAccessor(data[Math.min(199, data.length - 1)]);\n  var min = xAccessor(data.length < 50 ? 0 : data[Math.min(50, Math.floor(data.length / 2))]);\n  var xExtents = [min, max + 5];\n  var gridHeight = height - margin.top - margin.bottom;\n  var elderRayHeight = 100;\n\n  var elderRayOrigin = function elderRayOrigin(_, h) {\n    return [0, h - elderRayHeight];\n  };\n\n  var barChartHeight = gridHeight / 4;\n\n  var barChartOrigin = function barChartOrigin(_, h) {\n    return [0, h - barChartHeight - elderRayHeight];\n  };\n\n  var chartHeight = gridHeight - elderRayHeight;\n  return /*#__PURE__*/React.createElement(St.ChartContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(St.HiddenH3, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, \"\\uCE94\\uB4E4 \\uCC28\\uD2B8\"), isCandleLoading ? /*#__PURE__*/React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(ChartCanvas, {\n    height: height,\n    ratio: ratio,\n    width: width,\n    margin: margin,\n    data: data,\n    displayXAccessor: displayXAccessor,\n    seriesName: \"Data\",\n    xScale: xScale,\n    xAccessor: xAccessor,\n    xExtents: xExtents,\n    disableInteraction: false,\n    zoomAnchor: mouseBasedZoomAnchor,\n    onLoadBefore: function onLoadBefore() {\n      dispatch(startAddMoreCandleData());\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Chart, {\n    id: 2,\n    height: barChartHeight,\n    origin: barChartOrigin,\n    yExtents: barChartExtents,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BarSeries, {\n    fillStyle: volumeColor,\n    yAccessor: volumeSeries,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Chart, {\n    id: 3,\n    height: chartHeight,\n    yExtents: candleChartExtents,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    showGridLines: true,\n    showTickLabel: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    showGridLines: true,\n    tickFormat: pricesDisplayFormat,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CandlestickSeries, {\n    fill: openCloseColor,\n    wickStroke: openCloseColor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(LineSeries, {\n    yAccessor: ema26.accessor(),\n    strokeStyle: ema26.stroke(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n    yAccessor: ema26.accessor(),\n    fillStyle: ema26.stroke(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(LineSeries, {\n    yAccessor: ema12.accessor(),\n    strokeStyle: ema12.stroke(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CurrentCoordinate, {\n    yAccessor: ema12.accessor(),\n    fillStyle: ema12.stroke(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MouseCoordinateY, {\n    rectWidth: margin.right,\n    displayFormat: pricesDisplayFormat,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(EdgeIndicator, {\n    itemType: \"last\",\n    rectWidth: margin.right,\n    fill: openCloseColor,\n    lineStroke: openCloseColor,\n    displayFormat: pricesDisplayFormat,\n    yAccessor: yEdgeIndicator,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MovingAverageTooltip, {\n    origin: [8, 24],\n    options: [{\n      yAccessor: ema26.accessor(),\n      type: \"EMA\",\n      stroke: ema26.stroke(),\n      windowSize: ema26.options().windowSize\n    }, {\n      yAccessor: ema12.accessor(),\n      type: \"EMA\",\n      stroke: ema12.stroke(),\n      windowSize: ema12.options().windowSize\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ZoomButtons, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(OHLCTooltip, {\n    origin: [8, 16],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Chart, {\n    id: 4,\n    height: elderRayHeight,\n    yExtents: [0, elder.accessor()],\n    origin: elderRayOrigin,\n    padding: {\n      top: 8,\n      bottom: 8\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    showGridLines: true,\n    gridLinesStrokeStyle: \"#e0e3eb\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    ticks: 4,\n    tickFormat: pricesDisplayFormat,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MouseCoordinateX, {\n    displayFormat: timeDisplayFormat,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MouseCoordinateY, {\n    rectWidth: margin.right,\n    displayFormat: pricesDisplayFormat,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ElderRaySeries, {\n    yAccessor: elder.accessor(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(SingleValueTooltip, {\n    yAccessor: elder.accessor(),\n    yLabel: \"Elder Ray\",\n    yDisplayFormat: function yDisplayFormat(d) {\n      return \"\".concat(pricesDisplayFormat(d.bullPower), \", \").concat(pricesDisplayFormat(d.bearPower));\n    },\n    origin: [8, 16],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CrossHairCursor, {\n    snapX: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default withOHLCData()(withSize({\n  style: {\n    width: \"100%\",\n    height: \"500\",\n    minHeight: minHeight\n  }\n})(withDeviceRatio()(withSelectedOption()(withLoadingData()(withThemeData()(React.memo(MainChart, isEqual)))))));","map":{"version":3,"sources":["/Users/taehyunpark/Desktop/Work/Class4-Team5-Oco/upbit_clone/src/Components/Main/MainChart.js"],"names":["React","styled","useDispatch","startAddMoreCandleData","format","timeFormat","elderRay","ema","discontinuousTimeScaleProviderBuilder","Chart","ChartCanvas","CurrentCoordinate","BarSeries","CandlestickSeries","ElderRaySeries","LineSeries","MovingAverageTooltip","OHLCTooltip","SingleValueTooltip","mouseBasedZoomAnchor","XAxis","YAxis","CrossHairCursor","EdgeIndicator","MouseCoordinateX","MouseCoordinateY","ZoomButtons","withDeviceRatio","withSize","Loading","withOHLCData","withThemeData","withSelectedOption","withLoadingData","isEqual","barChartExtents","data","volume","candleChartExtents","high","low","yEdgeIndicator","close","volumeSeries","St","ChartContainer","section","HiddenH3","h3","margin","left","right","top","bottom","minHeight","MainChart","initialData","height","width","ratio","selectedTimeType","theme","isCandleLoading","dispatch","dateTimeFormat","timeDisplayFormat","pricesDisplayFormat","openCloseColor","open","priceUp","priceDown","volumeColor","priceUpTrans","priceDownTrans","xScaleProvider","inputDateAccessor","d","date","ema12","id","options","windowSize","merge","c","accessor","ema26","elder","calculatedData","xScale","xAccessor","displayXAccessor","max","Math","min","length","floor","xExtents","gridHeight","elderRayHeight","elderRayOrigin","_","h","barChartHeight","barChartOrigin","chartHeight","stroke","yAccessor","type","bullPower","bearPower","style","memo"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { useDispatch } from \"react-redux\";\nimport { startAddMoreCandleData } from \"../../Reducer/coinReducer\";\n\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport {\n  elderRay,\n  ema,\n  discontinuousTimeScaleProviderBuilder,\n  Chart,\n  ChartCanvas,\n  CurrentCoordinate,\n  BarSeries,\n  CandlestickSeries,\n  ElderRaySeries,\n  LineSeries,\n  MovingAverageTooltip,\n  OHLCTooltip,\n  SingleValueTooltip,\n  mouseBasedZoomAnchor,\n  XAxis,\n  YAxis,\n  CrossHairCursor,\n  EdgeIndicator,\n  MouseCoordinateX,\n  MouseCoordinateY,\n  ZoomButtons,\n  withDeviceRatio,\n  withSize,\n} from \"react-financial-charts\";\n\nimport Loading from \"../Global/Loading\";\n\nimport withOHLCData from \"../../Container/withOHLCData\";\nimport withThemeData from \"../../Container/withThemeData\";\nimport withSelectedOption from \"../../Container/withSelectedOption\";\nimport withLoadingData from \"../../Container/withLoadingData\";\nimport isEqual from \"react-fast-compare\";\n\nconst barChartExtents = (data) => {\n  return data.volume;\n};\n\nconst candleChartExtents = (data) => {\n  return [data.high, data.low];\n};\n\nconst yEdgeIndicator = (data) => {\n  return data.close;\n};\n\nconst volumeSeries = (data) => {\n  return data.volume;\n};\n\nconst St = {\n  ChartContainer: styled.section`\n    width: 100%;\n    height: 500px;\n    background-color: white;\n  `,\n  HiddenH3: styled.h3`\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    clip: rect(0, 0);\n    clip-path: polygon(0, 0);\n    overflow: hidden;\n    text-indent: -9999px;\n  `,\n};\n\nconst margin = { left: 10, right: 80, top: 20, bottom: 20 };\nconst minHeight = 350;\n\nconst MainChart = ({\n  data: initialData,\n  height,\n  width,\n  ratio,\n  selectedTimeType,\n  theme,\n  isCandleLoading,\n}) => {\n  if (height > 500) height = 500;\n  const dispatch = useDispatch();\n\n  const dateTimeFormat =\n    selectedTimeType === \"days\" || selectedTimeType === \"weeks\"\n      ? \"%y-%m-%d\"\n      : \"%y-%m-%d %H:%M\";\n  const timeDisplayFormat = timeFormat(dateTimeFormat);\n  const pricesDisplayFormat = format(\"\");\n\n  const openCloseColor = (data) => {\n    return data.close > data.open ? theme.priceUp : theme.priceDown;\n  };\n\n  const volumeColor = (data) => {\n    return data.close > data.open ? theme.priceUpTrans : theme.priceDownTrans;\n  };\n\n  const xScaleProvider = discontinuousTimeScaleProviderBuilder().inputDateAccessor(\n    (d) => d.date\n  );\n\n  const ema12 = ema()\n    .id(1)\n    .options({ windowSize: 12 })\n    .merge((d, c) => {\n      d.ema12 = c;\n    })\n    .accessor((d) => d.ema12);\n\n  const ema26 = ema()\n    .id(2)\n    .options({ windowSize: 26 })\n    .merge((d, c) => {\n      d.ema26 = c;\n    })\n    .accessor((d) => d.ema26);\n\n  const elder = elderRay();\n\n  const calculatedData = elder(ema26(ema12(initialData)));\n\n  const { data, xScale, xAccessor, displayXAccessor } = xScaleProvider(\n    calculatedData\n  );\n\n  // 확대 축소 초기 범위를 정하는 xExtendts설정, max와 min이 변하면 새로운 데이터 추가시 줌 설정이 풀린다\n  const max = xAccessor(data[Math.min(199, data.length - 1)]);\n  const min = xAccessor(\n    data.length < 50 ? 0 : data[Math.min(50, Math.floor(data.length / 2))]\n  );\n  const xExtents = [min, max + 5];\n\n  const gridHeight = height - margin.top - margin.bottom;\n\n  const elderRayHeight = 100;\n  const elderRayOrigin = (_, h) => [0, h - elderRayHeight];\n  const barChartHeight = gridHeight / 4;\n  const barChartOrigin = (_, h) => [0, h - barChartHeight - elderRayHeight];\n  const chartHeight = gridHeight - elderRayHeight;\n\n  return (\n    <St.ChartContainer>\n      <St.HiddenH3>캔들 차트</St.HiddenH3>\n      {isCandleLoading ? (\n        <Loading />\n      ) : (\n        <ChartCanvas\n          height={height}\n          ratio={ratio}\n          width={width}\n          margin={margin}\n          data={data}\n          displayXAccessor={displayXAccessor}\n          seriesName=\"Data\"\n          xScale={xScale}\n          xAccessor={xAccessor}\n          xExtents={xExtents}\n          disableInteraction={false}\n          zoomAnchor={mouseBasedZoomAnchor}\n          onLoadBefore={() => {\n            dispatch(startAddMoreCandleData());\n          }}\n        >\n          <Chart\n            id={2}\n            height={barChartHeight}\n            origin={barChartOrigin}\n            yExtents={barChartExtents}\n          >\n            <BarSeries fillStyle={volumeColor} yAccessor={volumeSeries} />\n          </Chart>\n          <Chart id={3} height={chartHeight} yExtents={candleChartExtents}>\n            <XAxis showGridLines showTickLabel={false} />\n            <YAxis showGridLines tickFormat={pricesDisplayFormat} />\n            <CandlestickSeries\n              fill={openCloseColor}\n              wickStroke={openCloseColor}\n            />\n            <LineSeries\n              yAccessor={ema26.accessor()}\n              strokeStyle={ema26.stroke()}\n            />\n            <CurrentCoordinate\n              yAccessor={ema26.accessor()}\n              fillStyle={ema26.stroke()}\n            />\n            <LineSeries\n              yAccessor={ema12.accessor()}\n              strokeStyle={ema12.stroke()}\n            />\n            <CurrentCoordinate\n              yAccessor={ema12.accessor()}\n              fillStyle={ema12.stroke()}\n            />\n            <MouseCoordinateY\n              rectWidth={margin.right}\n              displayFormat={pricesDisplayFormat}\n            />\n            <EdgeIndicator\n              itemType=\"last\"\n              rectWidth={margin.right}\n              fill={openCloseColor}\n              lineStroke={openCloseColor}\n              displayFormat={pricesDisplayFormat}\n              yAccessor={yEdgeIndicator}\n            />\n            <MovingAverageTooltip\n              origin={[8, 24]}\n              options={[\n                {\n                  yAccessor: ema26.accessor(),\n                  type: \"EMA\",\n                  stroke: ema26.stroke(),\n                  windowSize: ema26.options().windowSize,\n                },\n                {\n                  yAccessor: ema12.accessor(),\n                  type: \"EMA\",\n                  stroke: ema12.stroke(),\n                  windowSize: ema12.options().windowSize,\n                },\n              ]}\n            />\n\n            <ZoomButtons />\n            <OHLCTooltip origin={[8, 16]} />\n          </Chart>\n          <Chart\n            id={4}\n            height={elderRayHeight}\n            yExtents={[0, elder.accessor()]}\n            origin={elderRayOrigin}\n            padding={{ top: 8, bottom: 8 }}\n          >\n            <XAxis showGridLines gridLinesStrokeStyle=\"#e0e3eb\" />\n            <YAxis ticks={4} tickFormat={pricesDisplayFormat} />\n\n            <MouseCoordinateX displayFormat={timeDisplayFormat} />\n            <MouseCoordinateY\n              rectWidth={margin.right}\n              displayFormat={pricesDisplayFormat}\n            />\n\n            <ElderRaySeries yAccessor={elder.accessor()} />\n\n            <SingleValueTooltip\n              yAccessor={elder.accessor()}\n              yLabel=\"Elder Ray\"\n              yDisplayFormat={(d) =>\n                `${pricesDisplayFormat(d.bullPower)}, ${pricesDisplayFormat(\n                  d.bearPower\n                )}`\n              }\n              origin={[8, 16]}\n            />\n          </Chart>\n          <CrossHairCursor snapX={false} />\n        </ChartCanvas>\n      )}\n    </St.ChartContainer>\n  );\n};\n\nexport default withOHLCData()(\n  withSize({\n    style: {\n      width: \"100%\",\n      height: \"500\",\n      minHeight,\n    },\n  })(\n    withDeviceRatio()(\n      withSelectedOption()(\n        withLoadingData()(withThemeData()(React.memo(MainChart, isEqual)))\n      )\n    )\n  )\n);\n"]},"metadata":{},"sourceType":"module"}