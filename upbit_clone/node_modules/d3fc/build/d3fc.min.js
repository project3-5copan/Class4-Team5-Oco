(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-scale"),require("d3-time"),require("d3-random"),require("d3-fetch"),require("d3-path"),require("d3-selection"),require("d3-shape"),require("d3-scale-chromatic"),require("d3-dispatch"),require("d3-brush")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-scale","d3-time","d3-random","d3-fetch","d3-path","d3-selection","d3-shape","d3-scale-chromatic","d3-dispatch","d3-brush"],t):(e="undefined"==typeof globalThis?e||self:globalThis,t(e.fc={},e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3))})(this,function(e,t,a,n,i,l,r,o,d,s,c,h){'use strict';var he=Math.round,ue=Math.floor,ge=Math.min,fe=Math.ceil,pe=Math.exp,ye=Math.max,me=Math.abs;function u(e){return e}function g(){}function f(e){return"function"==typeof e?e:function(){return e}}function p(e){return"number"==typeof e&&isNaN(e)?void 0:e}function y(){var e=function(){return 10},t=g,a=u,n=function(e){return null!=e},i=function(i){var l=e.apply(this,arguments),r=i.slice(0,l).map(a);return i.map(function(e,o){return o>=l&&(r.shift(),r.push(a(e,o))),o<l-1||r.some(function(e){return!n(e)})?t(void 0,o):t(r,o)})};return i.period=function(){return arguments.length?(e=f(0>=arguments.length?void 0:arguments[0]),i):e},i.accumulator=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.defined=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i}function m(){var e=2,a=y().accumulator(function(a){var n=a&&t.deviation(a),i=a&&t.mean(a);return{average:i,upper:p(i+e*n),lower:p(i-e*n)}}),n=function(e){return a(e)};return n.multiplier=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},xe(n,a,"period","value"),n}function b(){var e=u,a=function(){return 9},n=function(e){var a=[];return function(n){var i;return a.length<e&&(null==n?a=[]:a.push(n)),a.length>=e&&(i=t.mean(a)),i}},i=function(t){var i=a.apply(this,arguments),l=2/(i+1),r=n(i),o;return t.map(function(t,a){var n=e(t,a);return o=void 0===o?r(n):n*l+(1-l)*o,p(o)})};return i.period=function(){return arguments.length?(a=f(0>=arguments.length?void 0:arguments[0]),i):a},i.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i}function x(){var e=u,a=b().period(12),n=b().period(26),i=b().period(9),l=function(l){a.value(e),n.value(e);var r=t.zip(a(l),n(l)).map(function(e){return void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}),o=i(r);return t.zip(r,o).map(function(e){return{macd:e[0],signal:e[1],divergence:void 0!==e[0]&&void 0!==e[1]?e[0]-e[1]:void 0}})};return l.value=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},Se(l,a,Ce({period:"fastPeriod"})),Se(l,n,Ce({period:"slowPeriod"})),Se(l,i,Ce({period:"signalPeriod"})),l}function v(e){"@babel/helpers - typeof";return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function V(e,t,a){return t&&w(e.prototype,t),a&&w(e,a),e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function D(){return D=_()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=Function.bind.apply(e,i),l=new a;return n&&A(l,n.prototype),l},D.apply(null,arguments)}function E(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function z(e){var t="function"==typeof Map?new Map:void 0;return z=function(e){function a(){return D(e,arguments,C(this).constructor)}if(null===e||!E(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,a)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A(a,e)},z(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:N(e)}function I(e){var t=_();return function(){var a=C(e),n;if(t){var i=C(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return P(this,n)}}function B(e,t){return M(e)||W(e,t)||O(e,t)||G()}function T(e){return M(e)||Y(e)||O(e)||G()}function R(e){return L(e)||Y(e)||O(e)||F()}function L(e){if(Array.isArray(e))return H(e)}function M(e){if(Array.isArray(e))return e}function Y(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function W(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,l=void 0;try{for(var r=e[Symbol.iterator](),o;!(n=(o=r.next()).done)&&(a.push(o.value),!(t&&a.length===t));n=!0);}catch(e){i=!0,l=e}finally{try{n||null==r["return"]||r["return"]()}finally{if(i)throw l}}return a}}function O(e,t){if(e){if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function F(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=O(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(t){throw t},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=!0,d=!1,s;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return r=e.done,e},e:function(t){d=!0,s=t},f:function(){try{r||null==a.return||a.return()}finally{if(d)throw s}}}}function q(){var e=y().accumulator(function(e){return e&&t.mean(e)}),a=function(t){return e(t)};return xe(a,e,"period","value"),a}function Q(){var e=.1,t=u,a=function(a){return a.map(function(a){var n=p(t(a)*(1-e)),i=p(t(a)*(1+e));return{lower:n,upper:i}})};return a.factor=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.value=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a}function j(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=b().period(13),l=function(l){return i.value(e),t.zip(l,i(l)).map(function(e){var t=p(a(e[0])-e[1]),i=p(n(e[0])-e[1]);return{bullPower:t,bearPower:i}})};return l.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},xe(l,i,"period"),l}function X(){var e={};return e.distance=function(e,t){return t-e},e.offset=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t},e.clampUp=function(e){return e},e.clampDown=function(e){return e},e.copy=function(){return e},e}function Z(e,t){var a=[],n=U(e),i;try{for(n.s();!(i=n.n()).done;){var l=i.value,r=t.clampUp(l),o=t.clampDown(l);r===o&&a.push(r)}}catch(e){n.e(e)}finally{n.f()}return a}function K(e){var t=this;arguments.length||(e=a.scaleIdentity());var n=X(),i=function(t){var a=e.domain(),i=e.range(),l=n.distance(a[0],a[1]),r=n.distance(a[0],t),o=r/l*(i[1]-i[0])+i[0];return o};return i.invert=function(t){var a=e.domain(),i=e.range(),l=(t-i[0])/(i[1]-i[0]),r=n.distance(a[0],a[1]);return n.offset(a[0],l*r)},i.domain=function(){if(!arguments.length)return e.domain();var t=0>=arguments.length?void 0:arguments[0],a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.nice=function(){e.nice();var t=e.domain(),a=n.clampUp(t[0]),l=n.clampDown(t[1]);return e.domain([a,l]),i},i.ticks=function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=e.ticks.apply(t,i);return Z(r,n)},i.copy=function(){return K(e.copy()).discontinuityProvider(n.copy())},i.discontinuityProvider=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},Se(i,e,ke("range","rangeRound","interpolate","clamp","tickFormat")),i}function $(){var e=[function(e){return e}],a=[0,0],n="percent",l=null,r=[],o=function(o){var d=Array(o.length),s=U(e),c;try{for(s.s();!(c=s.n()).done;)for(var h=c.value,u=0,g;u<o.length;u++)g=h(o[u],u),Array.isArray(g)?d.push.apply(d,R(g)):d.push(g)}catch(e){s.e(e)}finally{s.f()}var f=[t.min(d),t.max(d)];if(f[0]=null==f[0]?t.min(r):t.min([f[0]].concat(R(r))),f[1]=null==f[1]?t.max(r):t.max([f[1]].concat(R(r))),null!=l){var p=ye(me(f[1]-l),me(f[0]-l));f[0]=l-p,f[1]=l+p}switch(n){case"domain":{f[0]-=a[0],f[1]+=a[1];break}case"percent":{var y=f[1]-f[0];f[0]-=a[0]*y,f[1]+=a[1]*y;break}default:throw new Error("Unknown padUnit: ".concat(n));}return f};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.padUnit=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.include=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],o):r},o.symmetricalAbout=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o}function J(){var e=[],t=[0,0],a="percent",n=null,i=[],l=$(),r=function(e){return null==e?null:e.valueOf()},o=function(o){var d=e.map(function(e){return function(){var t=e.apply(void 0,arguments);return Array.isArray(t)?t.map(r):r(t)}});return l.accessors(d).pad(t).padUnit(a).symmetricalAbout(null==n?null:n.valueOf()).include(i.map(function(e){return e.valueOf()})),l(o).map(function(e){return new Date(e)})};return o.accessors=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},o.padUnit=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.include=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],o):i},o.symmetricalAbout=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o}function ee(){var e=1,t=20,a=.1,n=.1,l=i.randomNormal(),r=function(){for(var r=Math.sqrt,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,d=e/t,s=[],c=0;c<t+1;c++){s.push(o);var h=l()*r(d)*n+(a-n*n/2)*d;o*=pe(h)}return s};return r.period=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.steps=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.mu=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.sigma=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.random=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],r):l},r}function te(e){return"function"==typeof e?e:function(){return e}}function ae(){var e=new Date,t=100,a=n.timeDay,l=1,r=n.timeYear,o=1,d=null,s=function(){var e=i.randomNormal(1,.1);return fe(1e3*e())},c=ee(),h=function(e){var t=r.offset(e,o)-e;return(a.offset(e,l)-e)/t},u=function(e,t){var a=h(e),n=c.period(a)(t),i={date:e,open:n[0],high:ye.apply(Math,n),low:ge.apply(Math,n),close:n[c.steps()]};return i.volume=s(i),i},g=function(n){var i,r,o;do i=n?a.offset(n.date,l):new Date(e.getTime()),r=n?n.close:t,n=u(i,r),o=d&&!d(n);while(o);return n},f=function(){var e={},t;return e.next=function(){var e=g(t);return t=e,e},e.take=function(t){return e.until(function(e,a){return!t||0>t||a===t})},e.until=function(e){for(var a=[],n=0,i=g(t),l=e&&!e(i,n);l;)a.push(i),t=i,i=g(t),n+=1,l=e&&!e(i,n);return a},e},p=function(e){return f().take(e)};if(p.stream=f,"function"!=typeof Symbol||"symbol"!==v(Symbol.iterator))throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return p[Symbol.iterator]=function(){var e=f();return{next:function(){return{value:e.next(),done:!1}}}},p.startDate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.startPrice=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.interval=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],p):a},p.intervalStep=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},p.unitInterval=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],p):r},p.unitIntervalStep=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],p):o},p.filter=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],p):d},p.volume=function(){return arguments.length?(s=te(0>=arguments.length?void 0:arguments[0]),p):s},Se(p,c),p}function ne(){var e="BTC-USD",t=null,a=null,n=null,i=function(){var i=[];null!=t&&i.push("start="+t.toISOString()),null!=a&&i.push("end="+a.toISOString()),null!=n&&i.push("granularity="+n);var r="https://api.gdax.com/products/"+e+"/candles?"+i.join("&");return l.json(r).then(function(e){return e.map(function(e){return{date:new Date(1e3*e[0]),open:e[3],high:e[2],low:e[1],close:e[4],volume:e[5]}})})};return i.product=function(t){return arguments.length?(e=t,i):e},i.start=function(e){return arguments.length?(t=e,i):t},i.end=function(e){return arguments.length?(a=e,i):a},i.granularity=function(e){return arguments.length?(n=e,i):n},i}function ie(){var e=10,a=function(a){return 1>=e?a.map(function(e){return[e]}):t.range(0,fe(a.length/e)).map(function(t){return a.slice(t*e,(t+1)*e)})};return a.bucketSize=function(t){return arguments.length?(e=t,a):e},a}function le(){function e(e){var a=e.map(function(e){return[n(e),i(e)]}),l=t.range(1,a.length-1).map(function(e){var t=a[e-1],n=a[e],i=a[e+1];return .5*me((t[0]-i[0])*(n[1]-t[1])-(t[0]-n[0])*(i[1]-t[1]))});return l}var a=ie(),n=function(e){return e},i=function(e){return e},l=function(n){if(a.bucketSize()>=n.length)return n;var i=e(n),l=a(i),r=a(n.slice(1,n.length-1)),o=r.map(function(e,a){var n=l[a],i=t.max(n),r=n.indexOf(i);return e[r]});return[].concat([n[0]],o,[n[n.length-1]])};return xe(l,a,"bucketSize"),l.x=function(e){return arguments.length?(n=e,l):n},l.y=function(e){return arguments.length?(i=e,l):i},l}function re(){var e=function(e){return e},a=function(e){return e},n=ie(),i=function(i){if(n.bucketSize()>=i.length)return i;var l=n(i.slice(1,i.length-1)),r=i[0],o=i[i.length-1],d=[].concat([r],l,[o]),s=e(r),c=a(r),h=l.map(function(n,l){var i=t.mean(d[l+1],e),r=t.mean(d[l+1],a),o=n.map(function(t){return[e(t),a(t)]}),h=o.map(function(e){return .5*me((s-i)*(e[1]-c)-(s-e[0])*(r-c))}),u=h.indexOf(t.max(h)),g=o[u];return s=g[0],c=g[1],n[u]});return[].concat([i[0]],h,[i[i.length-1]])};return xe(i,n,"bucketSize"),i.x=function(t){return arguments.length?(e=t,i):e},i.y=function(e){return arguments.length?(a=e,i):a},i}function oe(){var e=ie(),a=function(e){return e},n=function(n){if(e.bucketSize()>n.length)return n;var i=t.extent(n,a),l=e(n.slice(1,n.length-1)),r=l.map(function(e){var t={},n=!0,l=e.map(a),r=l.filter(function(e){return e===i[0]||e===i[1]}).map(function(e){return l.indexOf(e)})[0],o,d;return void 0===r?(l.forEach(function(e,a){void 0===t[e]&&(t[e]=0),t[e]++,t[e]>t[o]||void 0===o?(o=e,d=a,n=!0):t[e]===t[o]&&(n=!1)}),n?e[d]:e[ue(e.length/2)]):e[r]});return[].concat([n[0]],r,[n[n.length-1]])};return xe(n,e,"bucketSize"),n.value=function(e){return arguments.length?(a=e,n):a},n}function de(){var e=arguments;return function(t,a){for(var n=0,i=e.length;n<i;n++)if(null==e[n](t,a))return!1;return!0}}function se(e){switch(e){case Gt.BYTE:case Gt.UNSIGNED_BYTE:return 1;case Gt.SHORT:case Gt.UNSIGNED_SHORT:return 2;case Gt.FLOAT:return 4;default:throw new Error("Unknown type ".concat(e));}}function ce(e){switch(e){case Gt.BYTE:return Int8Array;case Gt.UNSIGNED_BYTE:return Uint8Array;case Gt.SHORT:return Int16Array;case Gt.UNSIGNED_SHORT:return Uint16Array;case Gt.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(e));}}var be=function(e,t,a){var n=t[a];if("function"!=typeof n)throw new Error("Attempt to rebind ".concat(a," which isn't a function on the source object"));return function(){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];var r=n.apply(t,i);return r===t?e:r}},xe=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=0,r=n,o;l<r.length;l++)o=r[l],e[o]=be(e,t,o);return e},ve=function(e){return function(t){return e.reduce(function(e,t){return e&&t(e)},t)}},Se=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];for(var l=ve(n),r=0,o=Object.keys(t);r<o.length;r++){var d=o[r],s=l(d);s&&(e[s]=be(e,t,d))}return e},we=function(e){return e.map(function(e){return"string"==typeof e?new RegExp("^".concat(e,"$")):e})},Ve=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=we(t),function(e){return t.every(function(t){return!t.test(e)})&&e}},ke=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t=we(t),function(e){return t.some(function(t){return t.test(e)})&&e}},Ce=function(e){return function(t){return e[t]}},Ae=function(e){return e[0].toUpperCase()+e.slice(1)},_e=function(e){return function(t){return e+Ae(t)}},De=function(e,t,a,n){var i={sunday:0,monday:1,saturday:6},l=86400000,r=5*l,o={},d=function(t){return 0===e(t)||6===e(t)};return o.clampDown=function(a){if(a&&d(a)){var n=t.ceil(a);return e(n)===i.sunday?t.offset(n,-1):e(n)===i.monday?t.offset(n,-2):n}return a},o.clampUp=function(a){if(a&&d(a)){var n=t.floor(a);return e(n)===i.saturday?t.offset(n,2):e(n)===i.sunday?t.offset(n,1):n}return a},o.distance=function(e,t){e=o.clampUp(e),t=o.clampDown(t);var n=a.ceil(e);if(t<n)return t.getTime()-e.getTime();var i=n.getTime()-e.getTime(),d=a.ceil(t),s=d.getTime()-t.getTime(),c=he((d.getTime()-n.getTime())/(7*l));return c*r+i-s},o.offset=function(e,i){var l=d(e)?o.clampUp(e):e;if(0===i)return l;var s=0>i,c=i,h=s?n.floor(l):a.ceil(l);if(c-=h.getTime()-l.getTime(),s&&0<c||0<i&&0>c)return new Date(l.getTime()+i);l=s?h:t.offset(h,2);var u=ue(c/r);return l=t.offset(l,7*u),c-=u*r,l=new Date(l.getTime()+c),l},o.copy=function(){return o},o},Ee=function(e){return"function"==typeof e?e:function(){return e}},ze=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s="vertical",c=Ee(3),h=function(i){var h=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),u=n(e,r),g=l(e,r),f=o(e,r),p=c(e,r)/2;"vertical"===s?(h.moveTo(i,g),h.lineTo(i,u),h.moveTo(i,d),h.lineTo(i-p,d),h.moveTo(i,f),h.lineTo(i+p,f)):(h.moveTo(g,i),h.lineTo(u,i),h.moveTo(d,i),h.lineTo(d,i+p),h.moveTo(f,i),h.lineTo(f,i-p))}),e?null:h.toString()};return h.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],h):e},h.x=function(){return arguments.length?(t=Ee(0>=arguments.length?void 0:arguments[0]),h):t},h.open=function(){return arguments.length?(a=Ee(0>=arguments.length?void 0:arguments[0]),h):a},h.high=function(){return arguments.length?(n=Ee(0>=arguments.length?void 0:arguments[0]),h):n},h.low=function(){return arguments.length?(l=Ee(0>=arguments.length?void 0:arguments[0]),h):l},h.close=function(){return arguments.length?(o=Ee(0>=arguments.length?void 0:arguments[0]),h):o},h.width=function(){return arguments.length?(c=Ee(0>=arguments.length?void 0:arguments[0]),h):c},h.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],h):s},h},Ne=function(){var e=null,t=function(e){return e.x},a=function(e){return e.y},n="center",i="center",l=function(e){return e.height},o=Ee(3),d=function(d,s){var c=e||r.path();return d.forEach(function(e,r){var d=t.call(this,e,s||r),h=a.call(this,e,s||r),u=l.call(this,e,s||r),g=o.call(this,e,s||r),f;switch(n){case"left":f=g;break;case"right":f=0;break;case"center":f=g/2;break;default:throw new Error("Invalid horizontal alignment "+n);}var p;switch(i){case"bottom":p=-u;break;case"top":p=0;break;case"center":p=u/2;break;default:throw new Error("Invalid vertical alignment "+i);}c.rect(d-f,h-p,g,u)},this),e?null:c.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.x=function(){return arguments.length?(t=Ee(0>=arguments.length?void 0:arguments[0]),d):t},d.y=function(){return arguments.length?(a=Ee(0>=arguments.length?void 0:arguments[0]),d):a},d.width=function(){return arguments.length?(o=Ee(0>=arguments.length?void 0:arguments[0]),d):o},d.horizontalAlign=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.height=function(){return arguments.length?(l=Ee(0>=arguments.length?void 0:arguments[0]),d):l},d.verticalAlign=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d},Pe=function(){var e=null,t=function(e){return e.date},a=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},o=function(e){return e.close},s=Ee(3),c=function(i){var c=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=a(e,r),h=n(e,r),u=l(e,r),g=o(e,r),f=s(e,r);c.rect(i-f/2,d,f,g-d),c.moveTo(i,ge(g,d)),c.lineTo(i,h),c.moveTo(i,ye(g,d)),c.lineTo(i,u)}),e?null:c.toString()};return c.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.x=function(){return arguments.length?(t=Ee(0>=arguments.length?void 0:arguments[0]),c):t},c.open=function(){return arguments.length?(a=Ee(0>=arguments.length?void 0:arguments[0]),c):a},c.high=function(){return arguments.length?(n=Ee(0>=arguments.length?void 0:arguments[0]),c):n},c.low=function(){return arguments.length?(l=Ee(0>=arguments.length?void 0:arguments[0]),c):l},c.close=function(){return arguments.length?(o=Ee(0>=arguments.length?void 0:arguments[0]),c):o},c.width=function(){return arguments.length?(s=Ee(0>=arguments.length?void 0:arguments[0]),c):s},c},Ie=function(){var e=null,t=function(e){return e.value},a=function(e){return e.median},n=function(e){return e.upperQuartile},l=function(e){return e.lowerQuartile},o=function(e){return e.high},s=function(e){return e.low},c="vertical",h=Ee(5),u=Ee(.5),g=function(i){var g=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=h(e,r),f=d/2,p=d*u(e,r),y=p/2,m=o(e,r),b=n(e,r),x=a(e,r),v=l(e,r),S=s(e,r),w=v-b;"vertical"===c?(g.moveTo(i-y,m),g.lineTo(i+y,m),g.moveTo(i,m),g.lineTo(i,b),g.rect(i-f,b,d,w),g.moveTo(i-f,x),g.lineTo(i+f,x),g.moveTo(i,v),g.lineTo(i,S),g.moveTo(i-y,S),g.lineTo(i+y,S)):(g.moveTo(S,i-y),g.lineTo(S,i+y),g.moveTo(S,i),g.lineTo(v,i),g.rect(v,i-f,-w,d),g.moveTo(x,i-f),g.lineTo(x,i+f),g.moveTo(b,i),g.lineTo(m,i),g.moveTo(m,i-y),g.lineTo(m,i+y))}),e?null:g.toString()};return g.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],g):e},g.value=function(){return arguments.length?(t=Ee(0>=arguments.length?void 0:arguments[0]),g):t},g.median=function(){return arguments.length?(a=Ee(0>=arguments.length?void 0:arguments[0]),g):a},g.upperQuartile=function(){return arguments.length?(n=Ee(0>=arguments.length?void 0:arguments[0]),g):n},g.lowerQuartile=function(){return arguments.length?(l=Ee(0>=arguments.length?void 0:arguments[0]),g):l},g.high=function(){return arguments.length?(o=Ee(0>=arguments.length?void 0:arguments[0]),g):o},g.low=function(){return arguments.length?(s=Ee(0>=arguments.length?void 0:arguments[0]),g):s},g.width=function(){return arguments.length?(h=Ee(0>=arguments.length?void 0:arguments[0]),g):h},g.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],g):c},g.cap=function(){return arguments.length?(u=Ee(0>=arguments.length?void 0:arguments[0]),g):u},g},Be=function(){var e=null,t=function(e){return e.x},a=function(e){return e.high},n=function(e){return e.low},l="vertical",o=Ee(5),d=function(i){var s=e||r.path();return i.forEach(function(e,r){var i=t(e,r),d=o(e,r),c=d/2,h=a(e,r),u=n(e,r);"vertical"===l?(s.moveTo(i-c,h),s.lineTo(i+c,h),s.moveTo(i,h),s.lineTo(i,u),s.moveTo(i-c,u),s.lineTo(i+c,u)):(s.moveTo(u,i-c),s.lineTo(u,i+c),s.moveTo(u,i),s.lineTo(h,i),s.moveTo(h,i-c),s.lineTo(h,i+c))}),e?null:s.toString()};return d.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.value=function(){return arguments.length?(t=Ee(0>=arguments.length?void 0:arguments[0]),d):t},d.high=function(){return arguments.length?(a=Ee(0>=arguments.length?void 0:arguments[0]),d):a},d.low=function(){return arguments.length?(n=Ee(0>=arguments.length?void 0:arguments[0]),d):n},d.width=function(){return arguments.length?(o=Ee(0>=arguments.length?void 0:arguments[0]),d):o},d.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d},Te=function(e){return"function"==typeof e?e:function(){return e}},Re=1e-6,Le=function(e,t){e=e||"g";var a=function(e,t){return t},n=null,i=function(i,l){l=l||function(e){return e};var r=i.selection?i:null;r&&(i=i.selection());var o=i.selectAll(function(e,t,a){return Array.from(a[t].childNodes).filter(function(e){return 1===e.nodeType})}).filter(null==t?e:"".concat(e,".").concat(t)),d=o.data(l,a),s=d.enter().append(e).attr("class",t),c=d.exit();d=d.merge(s);var h=r||n;return h&&(d=d.transition(h).style("opacity",1),s.style("opacity",Re),c=c.transition(h).style("opacity",Re)),c.remove(),d.enter=function(){return s},d.exit=function(){return c},d};return i.element=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.className=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},i.transition=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},Me=function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)},Ye=function(e,t){if(Me(e,t)){var a=ye(e.x,t.x),n=ge(e.x+e.width,t.x+t.width),i=ye(e.y,t.y),l=ge(e.y+e.height,t.y+t.height);return(n-a)*(l-i)}return 0},We=function(e,a){return t.sum(e.map(function(t,n){return a===n?0:Ye(e[a],t)}))},Oe=function(e,t,a,n,i){return{x:e,y:t,width:a,height:n,location:i}},He=function(e){var t=e.x,a=e.y,n=e.width,i=e.height;return[Oe(t,a,n,i,"bottom-right"),Oe(t-n,a,n,i,"bottom-left"),Oe(t-n,a-i,n,i,"top-left"),Oe(t,a-i,n,i,"top-right"),Oe(t,a-i/2,n,i,"middle-right"),Oe(t-n/2,a,n,i,"bottom-center"),Oe(t-n,a-i/2,n,i,"middle-left"),Oe(t-n/2,a-i,n,i,"top-center")]},Fe=function(e,t,a){return[].concat(R(e.slice(0,t)),[a],R(e.slice(t+1)))},Ge=function(e,t){return e<t},Ue=function e(){var a=null,n=Ge,l=function(){return 0},r=function(e,t){return a-l(d[t],t,d)+l(e,t,Fe(d,t,e))},o=function i(o,s){a||(a=t.sum(d.map(function(e,t){return l(e,t,d)})));var c=r(o,s);return n(c,a)?e().locationScore(l).winningScore(n).score(c).rectangles(Fe(d,s,o)):i},d;return o.rectangles=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],o):d},o.score=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.winningScore=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],o):n},o.locationScore=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],o):l},o},qe=function(e){return e[Qe(e)]},Qe=function(e){return ue(Math.random()*e.length)},je=function(e,a){return e[t.scan(e,a)]},Xe=function(e){return"function"==typeof e?e:function(){return e}},Ze=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},Ke=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},$e=function(){var e=function(){return 0},t=function(e){return e.x},n=function(e){return e.y},l="center",r=function(){return 5},o="vertical",s=Ke({decorate:function(){},defined:function(a,l){return de(e,t,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=r(a,d),c=Ze(l,i),h=s.xScale(),u=s.yScale();if("vertical"===o){var g=u(n(a,d),d),f=u(e(a,d),d),p=h(t(a,d),d)+c;return{d:a,x:p,y:g,y0:f,width:i,height:g-f,origin:[p,g],baseOrigin:[p,f],transposedX:p,transposedY:g}}var y=h(n(a,d),d),m=h(e(a,d),d),b=u(t(a,d),d)+c;return{d:a,x:b,y:y,y0:m,width:i,height:y-m,origin:[y,b],baseOrigin:[m,b],transposedX:y,transposedY:b}},s.xValues=function(){return"vertical"===o?[t]:[e,n]},s.yValues=function(){return"vertical"===o?[e,n]:[t]},s.baseValue=function(){return arguments.length?(e=Xe(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(t=Xe(0>=arguments.length?void 0:arguments[0]),s):t},s.mainValue=function(){return arguments.length?(n=Xe(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(r=Xe(0>=arguments.length?void 0:arguments[0]),s):r},s.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],s):o},s},Je={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},et=function(){var e=$e(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=Le("path","line"),n=function(n){n.selection&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=a(o.select(l[i]),[n]);r.enter().attr("fill","none").attr("stroke",Je.black),r.attr("d",t),e.decorate()(r,n,i)})};return Se(n,e,Ve("baseValue","bandwidth","align")),xe(n,a,"key"),xe(n,t,"curve"),n},tt=function(){var e=$e(),t=d.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),a=function(a){var n=t.context();n.beginPath(),n.strokeStyle=Je.black,n.fillStyle="transparent",e.decorate()(n,a),t.defined(e.defined())(a),n.fill(),n.stroke(),n.closePath()};return Se(a,e,Ve("baseValue","bandwidth","align")),xe(a,t,"curve","context"),a},at=function(){var e=[0,1],t=[-1,1],a=function(){};return a.domain=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},a.range=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],a):t},a},nt=function(){var e={},t={},a=null,n=function(n,i){var l=n.context();Object.keys(e).forEach(function(t){var a=e[t];if("function"!=typeof a)throw new Error("Expected an attribute for ".concat(t,", found ").concat(a));var r=l.getAttribLocation(i,t);a.location(r)(n)}),Object.keys(t).forEach(function(e){var a=t[e];if("function"!=typeof a)throw new Error("Expected a uniform for ".concat(e,", found ").concat(a));var r=l.getUniformLocation(i,e);a.location(r)(n)}),null!==a&&a(n)};return n.flush=function(){Object.values(e).forEach(function(e){return e.clear()}),Object.values(t).forEach(function(e){return e.clear()}),null!==a&&a.clear()},n.attribute=function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return 1===a.length?e[a[0]]:(e[a[0]]=a[1],n)},n.uniform=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return 1===a.length?t[a[0]]:(t[a[0]]=a[1],n)},n.elementIndices=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n):a},n},it=function(e){var t=-1,a=e,n=!0,i=function(e){if(n){var i=e.context();if(Array.isArray(a))switch(a.length){case 1:i.uniform1fv(t,a);break;case 2:i.uniform2fv(t,a);break;case 3:i.uniform3fv(t,a);break;case 4:i.uniform4fv(t,a);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(a.length," provided."));}else i.uniform1f(t,a);n=!1}};return i.clear=function(){n=!0},i.location=function(){return arguments.length?(t!==(0>=arguments.length?void 0:arguments[0])&&(t=0>=arguments.length?void 0:arguments[0],n=!0),i):t},i.data=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},i},lt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},rt=function(){function e(e,t,a){return!e||f||t!==o||a!==d}function t(e,t){var i=a(e,n.VERTEX_SHADER),l=a(t,n.FRAGMENT_SHADER),r=n.createProgram();if(n.attachShader(r,i),n.attachShader(r,l),n.linkProgram(r),u&&!n.getProgramParameter(r,n.LINK_STATUS)){var o=n.getProgramInfoLog(r);throw n.deleteProgram(r),new Error("Failed to link program : ".concat(o,"\n            Vertex Shader : ").concat(e,"\n            Fragment Shader : ").concat(t))}return r}function a(e,t){var a=n.createShader(t);if(n.shaderSource(a,e),n.compileShader(a),u&&!n.getShaderParameter(a,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(a);throw n.deleteShader(a),new Error("Failed to compile shader : ".concat(i,"\n            Shader : ").concat(e))}return a}var n=null,i=null,l=null,r=null,o=null,d=null,s=lt.TRIANGLES,c=0,h=nt(),u=!1,g=null,f=!0,p=1,y=function a(u){if(null!=n){var y=l(),m=r();if(e(i,y,m)&&(i=t(y,m),o=y,d=m,f=!1),n.useProgram(i),h.uniform("uScreen",it([n.canvas.width/p,n.canvas.height/p])),h(a,i),0===c)null==h.elementIndices()?n.drawArrays(s,0,u):n.drawElements(s,u,n.UNSIGNED_SHORT,0);else if(null==h.elementIndices())g.drawArraysInstancedANGLE(s,0,c,u);else{var b=h.elementIndices().data().length;if(c!==b)throw new Error("Expected elementIndices length ".concat(b)+" to match subInstanceCount ".concat(c,"."));g.drawElementsInstancedANGLE(s,c,n.UNSIGNED_SHORT,0,u)}}};return y.extInstancedArrays=function(){return g},y.context=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.length?((null==t[0]||t[0]!==n)&&(h.flush(),f=!0),null!=t[0]&&t[0]!==n&&(g=t[0].getExtension("ANGLE_instanced_arrays")),n=t[0],y):n},y.buffers=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],y):h},y.vertexShader=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],y):l},y.fragmentShader=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],y):r},y.mode=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],y):s},y.subInstanceCount=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],y):c},y.debug=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],y):u},y.pixelRatio=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],y):p},y},ot=function(e){function t(e,t){e.push(t)}function a(e,t,a){var n=e.indexOf(a);e.splice(0<=n?n:e.length,0,t)}function n(e,t){var a=e.indexOf(t);-1===a&&e.push(t)}var i=[],l=[],r=function(){return e(i.join("\n"),l.join("\n"))};return r.appendHeader=function(e){return t(i,e),r},r.insertHeader=function(e,t){return a(i,e,t),r},r.appendHeaderIfNotExists=function(e){return n(i,e),r},r.appendBody=function(e){return t(l,e),r},r.insertBody=function(e,t){return a(l,e,t),r},r.appendBodyIfNotExists=function(e){return n(l,e),r},r},dt=function(e,t){return"\nprecision mediump float;\nfloat inf = 1.0 / 0.0;\n".concat(e,"\nvoid main() {\n    ").concat(t,"\n}")},st=function(e,t){return"\nprecision mediump float;\n".concat(e,"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    ").concat(t,"\n}")},ct={header:"attribute vec4 aFillColor;\n             varying vec4 vFillColor;",body:"vFillColor = aFillColor;"},ht={header:"attribute vec4 aStrokeColor;\n             varying vec4 vStrokeColor;",body:"vStrokeColor = aStrokeColor;"},ut={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 2.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},gt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 4.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},ft={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 3.14159);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},pt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},yt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt(aSize);\n        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},mt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},bt={header:"\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aSize;\n        attribute float aDefined;\n\n        uniform float uStrokeWidth;\n\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vSize = 3.0 * sqrt(aSize / 5.0);\n        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);\n        gl_PointSize = vSize + uStrokeWidth + 1.0;\n        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);"},xt={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n         (isPositiveY * isExtremeY * aLowValue) +\n         (isPositiveY * isNotExtremeY * aCloseValue) +\n         (isNotPositiveY * isNotExtremeY * aOpenValue) +\n         (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);\n        float lineWidthYDirection = isNotExtremeY * sign(aCloseValue - aOpenValue) * aCorner.y;\n\n        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},vt={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aOpenValue;\n        attribute float aCloseValue;\n        attribute float aLowValue;\n        attribute vec3 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        vColorIndicator = sign(aCloseValue - aOpenValue);\n\n        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;\n        float isNotPositiveY = 1.0 - isPositiveY;\n        float isExtremeY = abs(aCorner.y) - 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n        float yValue =\n            (isPositiveY * isExtremeY * aLowValue) +\n            (isPositiveY * isNotExtremeY * aCloseValue) +\n            (isNotPositiveY * isNotExtremeY * aOpenValue) +\n            (isNotPositiveY * isExtremeY * aHighValue);\n\n        float lineWidthXDirection = isExtremeY * aCorner.z;\n        float lineWidthYDirection = isNotExtremeY * aCorner.z;\n\n        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;\n        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},St={header:"\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aMainValue;\n        attribute float aBaseValue;\n        attribute vec2 aCorner;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isBaseline = (1.0 - aCorner.y) / 2.0;\n        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);\n\n        float xModifier = aCorner.x * (aBandwidth) / 2.0;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);"},wt={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossNextNextValue;\n        attribute float aMainNextNextValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossPrevValue;\n        attribute float aMainPrevValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        uniform float uStrokeWidth;\n        uniform vec2 uScreen;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined * aDefinedNext;\n        vec4 prev = vec4(aCrossPrevValue, aMainPrevValue, 0, 0);\n        vec4 curr = vec4(aCrossValue, aMainValue, 0, 0);\n        gl_Position = vec4(aCrossNextValue, aMainNextValue, 0, 1);\n        vec4 nextNext = vec4(aCrossNextNextValue, aMainNextNextValue, 0, 0);"},Vt={body:"\n        vec4 currVertexPosition = gl_Position;\n        vec4 nextVertexPosition = gl_Position;\n\n        if (all(equal(curr.xy, prev.xy))) {\n            prev.xy = curr.xy + normalize(curr.xy - currVertexPosition.xy);\n        }\n        if (all(equal(curr.xy, currVertexPosition.xy))) {\n            currVertexPosition.xy = curr.xy + normalize(curr.xy - prev.xy);\n        }\n        vec2 A = normalize(normalize(curr.xy - prev.xy) * uScreen);\n        vec2 B = normalize(normalize(currVertexPosition.xy - curr.xy) * uScreen);\n        vec2 tangent = normalize(A + B);\n        vec2 miter = vec2(-tangent.y, tangent.x);\n        vec2 normalA = vec2(-A.y, A.x);\n        float miterLength = 1.0 / dot(miter, normalA);\n        vec2 point = normalize(A - B);\n        if (miterLength > 10.0 && sign(aCorner.x * dot(miter, point)) > 0.0) {\n            currVertexPosition.xy = curr.xy - (aCorner.x * aCorner.y * uStrokeWidth * normalA) / uScreen.xy;\n        } else {\n            currVertexPosition.xy = curr.xy + (aCorner.x * miter * uStrokeWidth * miterLength) / uScreen.xy;\n        }\n\n        if (all(equal(nextVertexPosition.xy, curr.xy))) {\n            curr.xy = nextVertexPosition.xy + normalize(nextVertexPosition.xy - nextNext.xy);\n        }\n        if (all(equal(nextVertexPosition.xy, nextNext.xy))) {\n            nextNext.xy = nextVertexPosition.xy + normalize(nextVertexPosition.xy - curr.xy);\n        }\n        vec2 C = normalize(normalize(nextVertexPosition.xy - curr.xy) * uScreen);\n        vec2 D = normalize(normalize(nextNext.xy - nextVertexPosition.xy) * uScreen);\n        vec2 tangentCD = normalize(C + D);\n        vec2 miterCD = vec2(-tangentCD.y, tangentCD.x);\n        vec2 normalC = vec2(-C.y, C.x);\n        float miterCDLength = 1.0 / dot(miterCD, normalC);\n        vec2 pointCD = normalize(C - D);\n        if (miterCDLength > 10.0 && sign(aCorner.x * dot(miterCD, pointCD)) > 0.0) {\n            nextVertexPosition.xy = nextVertexPosition.xy - (aCorner.x * aCorner.y * uStrokeWidth * normalC) / uScreen.xy;\n        } else {\n            nextVertexPosition.xy = nextVertexPosition.xy + (aCorner.x * miterCD * uStrokeWidth * miterCDLength) / uScreen.xy;\n        }\n\n        gl_Position.xy = ((1.0 - aCorner.z) * currVertexPosition.xy) + (aCorner.z * nextVertexPosition.xy);"},kt={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aHighValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;",body:"\n        vDefined = aDefined;\n        float isLow = (aCorner.y + 1.0) / 2.0;\n        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;\n\n        float isEdgeCorner = abs(aCorner.x);\n        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;\n        float lineWidthYDirection = isEdgeCorner * aCorner.z;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);\n        float yModifier = (uStrokeWidth * lineWidthYDirection);"},Ct={header:"\n        attribute vec3 aCorner;\n        attribute float aCrossValue;\n        attribute float aMainValue;\n        attribute float aCrossNextValue;\n        attribute float aMainNextValue;\n        attribute float aBaseValue;\n        attribute float aBaseNextValue;\n        attribute float aDefined;\n        attribute float aDefinedNext;\n\n        varying float vDefined;\n\n        float when_lt(float a, float b) {\n            return max(sign(b - a), 0.0);\n        }\n\n        float and(float a, float b) {\n            return a * b;\n        }",body:"\n        vDefined = aDefined * aDefinedNext;\n        gl_Position = vec4(0, 0, 0, 1);\n\n        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);\n        float useIntercept = and(aCorner.z, hasIntercepted);\n\n        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);\n        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);\n\n        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);\n        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);\n\n        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);\n        float interceptXValue = (y0Constant - yConstant) / denominator;\n        float interceptYValue = (yGradient * interceptXValue) + yConstant;\n\n        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);\n\n        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));\n        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));\n        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));"},At={header:"\n        attribute vec4 aCorner;\n        attribute float aCrossValue;\n        attribute float aBandwidth;\n        attribute float aCapWidth;\n        attribute float aHighValue;\n        attribute float aUpperQuartileValue;\n        attribute float aMedianValue;\n        attribute float aLowerQuartileValue;\n        attribute float aLowValue;\n        attribute float aDefined;\n\n        uniform vec2 uScreen;\n        uniform float uStrokeWidth;\n\n        varying float vDefined;\n    ",body:"\n        vDefined = aDefined;\n        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;\n        float isNotExtremeY = 1.0 - isExtremeY;\n\n        float isNonZeroY = abs(sign(aCorner.y));\n        float isZeroY = 1.0 - isNonZeroY;\n\n        float isQuartileY = isNotExtremeY * isNonZeroY;\n\n        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;\n        float isNegativeY = 1.0 - isPositiveY;\n\n        float yValue =\n          (isExtremeY * isNegativeY) * aHighValue +\n          (isQuartileY * isNegativeY) * aUpperQuartileValue +\n          isZeroY * aMedianValue +\n          (isQuartileY * isPositiveY) * aLowerQuartileValue +\n          (isExtremeY * isPositiveY) * aLowValue;\n\n        gl_Position = vec4(aCrossValue, yValue, 0, 1);\n\n        float isHorizontal = aCorner.w;\n        float isVertical = 1.0 - isHorizontal;\n\n        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;\n\n        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;\n        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;"},_t={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float distance = length(2.0 * gl_PointCoord - 1.0);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Dt={header:"\n        varying float vSize;\n        varying float vDefined;\n\n        // anterior, exterior angles\n        float an = 0.628319;\n        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)\n        float en = 0.952000;\n        vec2 ecs = vec2(0.580055, 0.814577);\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        p -= acs;\n        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);\n        float d = length(p) * sign(p.x);\n\n        float distance = 1.0 + d;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},Et={header:"\n        varying float vSize;\n        varying float vDefined;\n    ",body:"\n        float canFill = 1.0;\n\n        vec2 p = 2.0 * gl_PointCoord - 1.0;\n        p.y *= -1.0;\n\n        // sector\n        float an = 3.141593 / 3.0;\n        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n        p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n        // box\n        vec2 d = abs(p) - vec2(0.9, 0.35);\n        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);\n\n        float distance = 1.0 + sdf;\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n            return;\n        }"},zt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);"},Nt={header:"\n        varying float vSize;\n        varying float vDefined;\n        float a = 0.6;\n        float b = 1.0;\n    ",body:"\n        if (vDefined < 0.5) {\n            discard;\n        }\n\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n\n        float x = abs(pointCoordTransform.x);\n        float y = abs(pointCoordTransform.y);\n\n        float X = (a * b * x) / (a * y + b * x);\n        float Y = (a * b * y) / (a * y + b * x);\n\n        float distance = length(vec2(x, y)) / length(vec2(X, Y));\n\n        if (distance > 1.0) {\n            discard;\n        }\n    "},Pt={header:"\n        varying float vSize;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));\n        float bottomEdgeDistance = pointCoordTransform.y + 0.5;\n        float distance = max(topEdgesDistance, bottomEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},It={header:"\n        varying float vSize;\n        varying float vStrokeWidthRatio;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;\n        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;\n        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));\n        float distance = max(innerCornerDistance, outerEdgeDistance);\n        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);\n        if (distance > 1.0 || vDefined < 0.5) {\n            discard;\n        }"},Bt={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Tt={header:"\n        varying float vColorIndicator;\n        varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.4, 0.8, 0, 1);\n        if (vColorIndicator < 0.0) {\n            gl_FragColor = vec4(0.8, 0.4, 0, 1);\n        }"},Rt={header:"\n        varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n        if (vDefined < 0.5) {\n            discard;\n        }\n        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);"},Lt={header:"\n        varying float vDefined;\n    ",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},Mt={header:"varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }"},Yt={header:"varying float vDefined;",body:"\n        float canFill = 1.0;\n        float canStroke = 0.0;\n\n        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);\n\n        if (vDefined < 0.5) {\n            discard;\n        }"},Wt={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},Ot={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},Ht={header:"varying float vDefined;",body:"\n        float canFill = 0.0;\n        float canStroke = 1.0;\n        if (vDefined < 0.5) {\n            discard;\n        }"},Ft=function(){var e=ot(dt),t=ot(st);return e.appendHeader(Ct.header).appendBody(Ct.body),t.appendHeader(Rt.header).appendBody(Rt.body),{vertex:function(){return e},fragment:function(){return t}}},Gt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126},Ut=function(){var e=-1,t=null,a=1,n=Gt.FLOAT,i=!1,l=0,r=0,o=null,d=function(d){var s=d.context();null==t&&(t=s.createBuffer()),s.bindBuffer(s.ARRAY_BUFFER,t),s.vertexAttribPointer(e,a,n,i,l,r),s.enableVertexAttribArray(e);var c=d.extInstancedArrays();c.vertexAttribDivisorANGLE(e,null==o?0<d.subInstanceCount()?1:0:o)};return d.location=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],d):e},d.buffer=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},d.size=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],d):n},d.normalized=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],d):i},d.stride=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],d):l},d.offset=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],d):r},d.divisor=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],d):o},d},qt=function(){var e=Gt.FLOAT,t=new Float32Array(0),a=function(a){var n=ce(e);return t.length>a?t=new n(t.buffer,0,a):t.length!==a&&(t=new n(a)),t};return a.type=function(){if(!arguments.length)return e;if(e!==(0>=arguments.length?void 0:arguments[0])){e=0>=arguments.length?void 0:arguments[0];var n=ce(e);t=new n(0)}return a},a},Qt=function(){var e=!0,t=1,a=Gt.FLOAT,n=qt(),l=function(e){return e},r=null,o=function(){var o=r.length,d=n.type(a)(o*t);if(1<t)for(var s=0,c;s<o;s++){if(c=l(r[s],s),c.length!==t)throw new Error("Expected components array of size ".concat(t,", recieved array with length ").concat(c.length,"."));for(var h=0;h<t;h++)d[s*t+h]=c[h]}else for(var u=0,g;u<o;u++){if(g=l(r[u],u),Array.isArray(g))throw new Error("Expected a single component value, recieved array with length ".concat(g.length,"."));d[u]=g}return e=!1,d};return o.dirty=function(){return e},o.clear=function(){e=!0},o.size=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e=!0,o):t},o.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e=!0,o):a},o.arrayViewFactory=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e=!0,o):n},o.value=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e=!0,o):l},o.data=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],e=!0,o):r},o},jt=function(){var e=Ut(),t=Qt(),a=function a(n){if(e.size(a.size()).type(a.type()),e(n),!!t.dirty()){var i=t(),l=n.context();l.bindBuffer(l.ARRAY_BUFFER,e.buffer()),l.bufferData(l.ARRAY_BUFFER,i,l.DYNAMIC_DRAW)}};return a.clear=function(){e.buffer(null),t.clear()},xe(a,e,"normalized","location","divisor"),xe(a,t,"data","value","size","type"),a},Xt=function(e,t,a,n){for(var i=arguments.length,l=Array(4<i?i-4:0),r=4;r<i;r++)l[r-4]=arguments[r];e[t]=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var o=a[n].apply(a,l.concat(i));return o===a?e:o}},Zt=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(6),t=at(),a=at(),n=function(){},i=jt().divisor(0).size(3).type(Gt.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);e.buffers().attribute("aCorner",i);var l=function(i){var l=Ft();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e(i-1)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),Xt(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),Xt(l,"baseNextValueAttribute",e.buffers(),"attribute","aBaseNextValue"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),Xt(l,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),l},Kt=function(){var e=ot(dt),t=ot(st);return e.appendHeader(ut.header).appendBody(ut.body),t.appendHeader(_t.header).appendBody(_t.body),{vertex:function(){return e},fragment:function(){return t}}},$t=function(){var e=rt().mode(lt.POINTS),t=at(),a=at(),n=Kt(),i=function(){},l=function(l){e.vertexShader(n.vertex()).fragmentShader(n.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e(l)};return l.type=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],l):i},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"sizeAttribute",e.buffers(),"attribute","aSize"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},Jt=function(){var e=ot(dt),t=ot(st);return e.appendHeader(wt.header).appendBody(wt.body),t.appendHeader(Ht.header).appendBody(Ht.body),{vertex:function(){return e},fragment:function(){return t}}},ea=function(){var e=1,t=function(t){t.buffers().uniform("uStrokeWidth",it(e))};return t.lineWidth=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},ta=function(e){var t=null,a=e,n=!0,i=function(e){var i=e.context();null==t&&(t=i.createBuffer()),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t),n&&(i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),i.STATIC_DRAW),n=!1)};return i.clear=function(){t=null,n=!0},i.data=function(){return arguments.length?(n=!0,a=0>=arguments.length?void 0:arguments[0],i):a},i},aa=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(12),t=at(),a=at(),n=function(){},i=ea(),l=jt().divisor(0).size(3).type(Gt.BYTE).data([[-1,0,0],[1,1,0],[1,-1,1],[-1,0,1],[1,1,1]]);e.buffers().elementIndices(ta([0,1,2,1,2,3,0,2,3,2,3,4])).attribute("aCorner",l);var r=function(l){var r=Jt();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"prev",0),a(e,"prev",1),t(e,"curr",0),a(e,"curr",1),t(e,"gl_Position",0),a(e,"gl_Position",1),t(e,"nextNext",0),a(e,"nextNext",1),e.vertexShader().appendBody(Vt.body),i(e),n(e),e(l-1)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossPreviousValueAttribute",e.buffers(),"attribute","aCrossPrevValue"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"crossNextValueAttribute",e.buffers(),"attribute","aCrossNextValue"),Xt(r,"crossNextNextValueAttribute",e.buffers(),"attribute","aCrossNextNextValue"),Xt(r,"mainPreviousValueAttribute",e.buffers(),"attribute","aMainPrevValue"),Xt(r,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(r,"mainNextValueAttribute",e.buffers(),"attribute","aMainNextValue"),Xt(r,"mainNextNextValueAttribute",e.buffers(),"attribute","aMainNextNextValue"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),Xt(r,"definedNextAttribute",e.buffers(),"attribute","aDefinedNext"),r},na=function(){var e=ot(dt),t=ot(st);return e.appendHeader(vt.header).appendBody(vt.body),t.appendHeader(Tt.header).appendBody(Tt.body),{vertex:function(){return e},fragment:function(){return t}}},ia=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(18),t=at(),a=at(),n=ea(),i=function(){},l=jt().divisor(0).size(3).type(Gt.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);e.buffers().elementIndices(ta([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",l);var r=function(l){var r=na();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,n,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},la=function(){var e=ot(dt),t=ot(st);return e.appendHeader(St.header).appendBody(St.body),t.appendHeader(Yt.header).appendBody(Yt.body),{vertex:function(){return e},fragment:function(){return t}}},ra=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(6),t=at(),a=at(),n=function(){},i=jt().divisor(0).size(2).type(Gt.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);e.buffers().elementIndices(ta([0,1,2,0,1,3])).attribute("aCorner",i);var l=function(i){var l=la();e.vertexShader(l.vertex()).fragmentShader(l.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n        "),n(e),e(i)};return l.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],l):n},l.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},xe(l,e,"context","pixelRatio"),Xt(l,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(l,"mainValueAttribute",e.buffers(),"attribute","aMainValue"),Xt(l,"baseValueAttribute",e.buffers(),"attribute","aBaseValue"),Xt(l,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(l,"definedAttribute",e.buffers(),"attribute","aDefined"),l},oa=function(){var e=ot(dt),t=ot(st);return e.appendHeader(kt.header).appendBody(kt.body),t.appendHeader(Mt.header).appendBody(Mt.body),{vertex:function(){return e},fragment:function(){return t}}},da=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(18),t=at(),a=at(),n=function(){},i=ea(),l=jt().divisor(0).size(3).type(Gt.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);e.buffers().elementIndices(ta([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",l);var r=function(l){var r=oa();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n                gl_Position.x += xModifier / uScreen.x * 2.0;\n                gl_Position.y += yModifier / uScreen.y * 2.0;\n            "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},sa=function(){var e=ot(dt),t=ot(st);return e.appendHeader(xt.header).appendBody(xt.body),t.appendHeader(Bt.header).appendBody(Bt.body),{vertex:function(){return e},fragment:function(){return t}}},ca=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(12),t=at(),a=at(),n=ea(),i=function(){},l=jt().divisor(0).size(3).type(Gt.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);e.buffers().elementIndices(ta([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",l);var r=function(l){var r=sa();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),n(e),e.vertexShader().appendBody("\n          gl_Position.x += xModifier / uScreen.x * 2.0;\n          gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),i(e),e(l)};return r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,n,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"openValueAttribute",e.buffers(),"attribute","aOpenValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"closeValueAttribute",e.buffers(),"attribute","aCloseValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ha=function(){var e=ot(dt),t=ot(st);return e.appendHeader(At.header).appendBody(At.body),t.appendHeader(Lt.header).appendBody(Lt.body),{vertex:function(){return e},fragment:function(){return t}}},ua=function(){var e=rt().mode(lt.TRIANGLES).subInstanceCount(54),t=at(),a=at(),n=function(){},i=ea(),l=jt().divisor(0).size(4).type(Gt.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);e.buffers().elementIndices(ta([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",l);var r=function(l){var r=ha();e.vertexShader(r.vertex()).fragmentShader(r.fragment()),t(e,"gl_Position",0),a(e,"gl_Position",1),i(e),e.vertexShader().appendBody("\n            gl_Position.x += xModifier / uScreen.x * 2.0;\n            gl_Position.y += yModifier / uScreen.y * 2.0;\n        "),n(e),e(l)};return r.decorate=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.xScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.yScale=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},xe(r,e,"context","pixelRatio"),xe(r,i,"lineWidth"),Xt(r,"crossValueAttribute",e.buffers(),"attribute","aCrossValue"),Xt(r,"highValueAttribute",e.buffers(),"attribute","aHighValue"),Xt(r,"upperQuartileValueAttribute",e.buffers(),"attribute","aUpperQuartileValue"),Xt(r,"medianValueAttribute",e.buffers(),"attribute","aMedianValue"),Xt(r,"lowerQuartileValueAttribute",e.buffers(),"attribute","aLowerQuartileValue"),Xt(r,"lowValueAttribute",e.buffers(),"attribute","aLowValue"),Xt(r,"bandwidthAttribute",e.buffers(),"attribute","aBandwidth"),Xt(r,"capAttribute",e.buffers(),"attribute","aCapWidth"),Xt(r,"definedAttribute",e.buffers(),"attribute","aDefined"),r},ga=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0<e||0>t)throw new Error("Offset values (".concat(e," & ").concat(t,") must straddle 0 "));var a=Ut(),n=Qt(),i=function i(l){var r=i.size()*se(i.type()),o=me(e)*r;if(a.offset(o).size(i.size()).type(i.type()),a(l),!!n.dirty()){var d=n(),s=o+d.length*se(i.type())+t*r,c=l.context();c.bindBuffer(c.ARRAY_BUFFER,a.buffer()),c.bufferData(c.ARRAY_BUFFER,s,c.DYNAMIC_DRAW),c.bufferSubData(c.ARRAY_BUFFER,o,d)}};return i.offset=function(n){if(e>n||n>t)throw new Error("Requested offset ".concat(n," exceeds bounds (").concat(e," & ").concat(t,") "));var l=function(t){a.offset((n-e)*i.size()*se(i.type())),a(t)};return xe(l,i,"clear","location"),l},i.clear=function(){a.buffer(null),n.clear()},xe(i,a,"normalized","location","divisor"),xe(i,n,"data","value","size","type"),i},fa=function(){var e=at(),t=function(e){return"linear".concat(e)},a=function a(n,i,l){n.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(t(l),"Scale;")).appendBody("".concat(i," = ").concat(i," + ").concat(t(l),"Offset;")).appendBody("".concat(i," = ").concat(i," * ").concat(t(l),"Scale;"));var r=e.domain()[1]-e.domain()[0],o=e.range()[1]-e.range()[0],d=e.range()[0]*(r/o)-e.domain()[0],s=[0,0,0,0],a=[1,1,1,1];s[l]=d,a[l]=o/r,n.buffers().uniform("".concat(t(l),"Offset"),it(s)).uniform("".concat(t(l),"Scale"),it(a))};return Se(a,e),a},pa=function(){function e(e,t){var a=Math.log10;return a(e)/a(t)}var t=at(),a=10,n=function(e){return"log".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * clamp(log(").concat(r,") / log(").concat(n(o),"Base), -inf, inf))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Base;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],h=c/s,u=t.range()[0]-h*e(t.domain()[0],a),g=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];g[o]=u,i[o]=h,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),it(g)).uniform("".concat(n(o),"Scale"),it(i)).uniform("".concat(n(o),"Include"),it(f)).uniform("".concat(n(o),"Base"),it(a))};return i.base=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},Se(i,t),i},ya=function(){function e(t,a){var e=Math.pow,n=Math.sign;return n(t)*e(me(t),a)}var t=at(),a=1,n=function(e){return"pow".concat(e)},i=function i(l,r,o){var d="".concat(n(o),"Offset + (").concat(n(o),"Scale * sign(").concat(r,") * pow(abs(").concat(r,"), vec4(").concat(n(o),"Exp)))");l.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(n(o),"Include;")).appendHeaderIfNotExists("uniform float ".concat(n(o),"Exp;")).appendBody("".concat(r," = (").concat(n(o),"Include * (").concat(d,")) + ((1.0 - ").concat(n(o),"Include) * ").concat(r,");"));var s=e(t.domain()[1],a)-e(t.domain()[0],a),c=t.range()[1]-t.range()[0],h=c/s,u=t.range()[0]-h*e(t.domain()[0],a),g=[0,0,0,0],i=[0,0,0,0],f=[0,0,0,0];g[o]=u,i[o]=h,f[o]=1,l.buffers().uniform("".concat(n(o),"Offset"),it(g)).uniform("".concat(n(o),"Scale"),it(i)).uniform("".concat(n(o),"Include"),it(f)).uniform("".concat(n(o),"Exp"),it(a))};return i.exponent=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],i):a},Se(i,t),i},ma=a.scaleLinear().copy.toString(),ba=a.scaleLog().copy.toString(),xa=a.scalePow().copy.toString(),va=a.scaleTime().copy.toString(),Sa=a.scaleIdentity(),wa=Date.now(),Va=function(e){return e-wa},ka=function(e){switch(e.copy.toString()){case ma:return{scale:Sa,webglScale:fa().domain(e.domain())};case va:return{scale:Va,webglScale:fa().domain(e.domain().map(Va))};case ba:return{scale:Sa,webglScale:pa().domain(e.domain()).base(e.base())};case xa:return{scale:Sa,webglScale:ya().domain(e.domain()).exponent(e.exponent())};default:return{scale:e.copy(),webglScale:fa().domain(e.range())};}},Ca=function(){var e=ot(dt),t=ot(st);return e.appendHeader(pt.header).appendBody(pt.body),t.appendHeader(zt.header).appendBody(zt.body),{vertex:function(){return e},fragment:function(){return t}}},Aa=function(){var e=ot(dt),t=ot(st);return e.appendHeader(mt.header).appendBody(mt.body),t.appendHeader(Pt.header).appendBody(Pt.body),{vertex:function(){return e},fragment:function(){return t}}},_a=function(){var e=ot(dt),t=ot(st);return e.appendHeader(bt.header).appendBody(bt.body),t.appendHeader(It.header).appendBody(It.body),{vertex:function(){return e},fragment:function(){return t}}},Da=function(){var e=ot(dt),t=ot(st);return e.appendHeader(yt.header).appendBody(yt.body),t.appendHeader(Nt.header).appendBody(Nt.body),{vertex:function(){return e},fragment:function(){return t}}},Ea=function(){var e=ot(dt),t=ot(st);return e.appendHeader(gt.header).appendBody(gt.body),t.appendHeader(Dt.header).appendBody(Dt.body),{vertex:function(){return e},fragment:function(){return t}}},za=function(){var e=ot(dt),t=ot(st);return e.appendHeader(ft.header).appendBody(ft.body),t.appendHeader(Et.header).appendBody(Et.body),{vertex:function(){return e},fragment:function(){return t}}},Na=function(e){switch(e){case d.symbolCircle:return Kt();case d.symbolSquare:return Ca();case d.symbolTriangle:return Aa();case d.symbolCross:return _a();case d.symbolDiamond:return Da();case d.symbolStar:return Ea();case d.symbolWye:return za();default:throw new Error("Unrecognised symbol: ".concat(e));}},Pa=function(e){var t=Ut().divisor(1),a=e,n=!0,i=function(e){if(t(e),!!n){if(!Array.isArray(a))throw new Error("Expected an array, received: ".concat(a));if(a.length!==t.size())throw new Error("Expected array of length: ".concat(t.size(),", recieved array of length: ").concat(a.length));var i=e.context();i["vertexAttrib".concat(a.length,"fv")](t.location(),a),i.disableVertexAttribArray(t.location()),n=!1}};return i.clear=function(){n=!0},i.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],n=!0,i):a},xe(i,t,"normalized","size","location"),i},Ia=function(){var e=$e(),t=ga(-1,2),a=t.offset(-1),n=t.offset(1),i=t.offset(2),l=ga(-1,2),r=l.offset(-1),o=l.offset(1),d=l.offset(2),s=ga(0,1).type(Gt.UNSIGNED_BYTE),c=s.offset(1),h=aa().crossPreviousValueAttribute(a).crossValueAttribute(t).crossNextValueAttribute(n).crossNextNextValueAttribute(i).mainPreviousValueAttribute(r).mainValueAttribute(l).mainNextValueAttribute(o).mainNextNextValueAttribute(d).definedAttribute(s).definedNextAttribute(c),u=function(){return!1},g=ka,f=[],p=null,y=null,m=function(a){var n=g(e.xScale()),r=g(e.yScale()),o=!u(f,a);o&&(f=a,s.value(function(t,a){return e.defined()(t,a)}).data(a)),(o||n.scale!==p)&&(p=n.scale,"vertical"===e.orient()?t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return n.scale(e.mainValue()(t,a))}).data(a)),(o||r.scale!==y)&&(y=r.scale,"vertical"===e.orient()?l.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a):l.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),h.xScale(n.webglScale).yScale(r.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),h(a.length)};return m.equals=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],m):u},m.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],m):g},Se(m,e,Ve("baseValue","bandwidth","align")),xe(m,h,"context","lineWidth","pixelRatio"),m},Ba=function(){var e=d.symbol(),t=$e(),a=Le("g","point"),n=function(e){return"translate("+e[0]+", "+e[1]+")"},i=function(i){i.selection&&a.transition(i),i.each(function(i,l,r){var d=i.filter(t.defined()),s=a(o.select(r[l]),d);s.enter().attr("transform",function(e,a){return n(t.values(e,a).origin)}).attr("fill",Je.gray).attr("stroke",Je.black).append("path"),s.attr("transform",function(e,a){return n(t.values(e,a).origin)}).select("path").attr("d",e),t.decorate()(s,i,l)})};return Se(i,t,Ve("baseValue","bandwidth","align")),xe(i,a,"key"),xe(i,e,"type","size"),i},Ta=function(){var e=d.symbol(),t=$e(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=Je.black,l.fillStyle=Je.gray,t.decorate()(l,a,n),e(a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return Se(a,t,Ve("baseValue","bandwidth","align")),xe(a,e,"size","type","context"),a},Ra=function(){var e=function(e){return e.high},t=function(e){return e.low},n=function(e){return e.cross},l="vertical",r="center",o=function(){return 5},s=Ke({decorate:function(){},defined:function(a,l){return de(t,e,n)(a,l)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return s.values=function(a,d){var i=o(a,d),c=Ze(r,i),h=s.xScale(),u=s.yScale();if("vertical"===l){var g=u(e(a,d));return{origin:[h(n(a,d))+c,g],high:0,low:u(t(a,d))-g,width:i}}var f=h(t(a,d));return{origin:[f,u(n(a,d))+c],high:h(e(a,d))-f,low:0,width:i}},s.xValues=function(){return"vertical"===l?[n]:[e,t]},s.yValues=function(){return"vertical"===l?[e,t]:[n]},s.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.lowValue=function(){return arguments.length?(t=Xe(0>=arguments.length?void 0:arguments[0]),s):t},s.highValue=function(){return arguments.length?(e=Xe(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(n=Xe(0>=arguments.length?void 0:arguments[0]),s):n},s.bandwidth=function(){return arguments.length?(o=Xe(0>=arguments.length?void 0:arguments[0]),s):o},s.align=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},La=function(){var e=function(e){return e.date},t=function(e){return e.open},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.close},o=function(){return 5},s="center",c=function(t,a){return h.xScale()(e(t,a))},h;return h=Ke({decorate:function(){},defined:function(a,o){return de(e,t,l,n,r)(a,o)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()}),h.values=function(e,a){var i=r(e,a),d=t(e,a),u=o(e,a),g=Ze(s,u),f="";return i>d?f="up":i<d&&(f="down"),{cross:c(e,a)+g,open:h.yScale()(d),high:h.yScale()(n(e,a)),low:h.yScale()(l(e,a)),close:h.yScale()(i),width:u,direction:f}},h.xValues=function(){return[e]},h.yValues=function(){return[t,n,l,r]},h.crossValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],h):e},h.openValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],h):t},h.highValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],h):n},h.lowValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],h):l},h.yValue=h.closeValue=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],h):r},h.bandwidth=function(){return arguments.length?(o=Xe(0>=arguments.length?void 0:arguments[0]),h):o},h.align=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],h):s},h},Ma=function(e,t){var a=La(),n=Le("g",t),l=function(e){return"translate("+e.cross+", "+e.high+")"},r=function(e){return function(t){return e.selection?t.transition(e):t}},d=function(i){i.selection&&n.transition(i);var s=r(i);i.each(function(i,r,d){var c=i.filter(a.defined()),h=n(o.select(d[r]),c);h.enter().attr("transform",function(e,t){return l(a.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(n,r,i){var d=a.values(n,r),c="up"===d.direction?Je.green:Je.red,h=s(o.select(i[r])).attr("class",t+" "+d.direction).attr("stroke",c).attr("fill",c).attr("transform",function(){return l(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),h.select("path").attr("d",e([n]))}),a.decorate()(h,i,r)})};return xe(d,n,"key"),Se(d,a),d},Ya=function(e){var t=La(),a=function(a){var n=a.filter(t.defined()),l=e.context();n.forEach(function(a,n){l.save();var i=t.values(a,n);l.translate(i.cross,i.high),l.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var r="up"===i.direction?Je.green:Je.red;l.strokeStyle=r,l.fillStyle=r,t.decorate()(l,a,n),l.fill(),l.stroke(),l.closePath(),l.restore()})};return xe(a,e,"context"),Se(a,t),a},Wa=function(e){var t=La(),a=jt(),n=jt(),i=jt(),l=jt(),r=jt(),o=jt().type(Gt.UNSIGNED_SHORT),d=jt().type(Gt.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(n).highValueAttribute(i).lowValueAttribute(l).closeValueAttribute(r).bandwidthAttribute(o).definedAttribute(d);var s=function(){return!1},c=ka,h=[],u=null,g=null,f=function(f){var p=c(t.xScale()),y=c(t.yScale()),m=!s(h,f);m&&(h=f,o.value(function(e,a){return t.bandwidth()(e,a)}).data(f),d.value(function(e,a){return t.defined()(e,a)}).data(f)),(m||p.scale!==u)&&(u=p.scale,a.value(function(e,a){return p.scale(t.crossValue()(e,a))}).data(f)),(m||y.scale!==g)&&(g=y.scale,n.value(function(e,a){return y.scale(t.openValue()(e,a))}).data(f),i.value(function(e,a){return y.scale(t.highValue()(e,a))}).data(f),l.value(function(e,a){return y.scale(t.lowValue()(e,a))}).data(f),r.value(function(e,a){return y.scale(t.closeValue()(e,a))}).data(f)),e.xScale(p.webglScale).yScale(y.webglScale).decorate(function(e){return t.decorate()(e,f,0)}),e(f.length)};return f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},Se(f,t,Ve("align")),xe(f,e,"context","lineWidth","pixelRatio"),f},Oa=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},n=function(e){return e.high},l=function(e){return e.low},r=function(e){return e.value},o=function(e){return e.median},s="vertical",c="center",h=function(){return 5},u=Ke({decorate:function(){},defined:function(a,d){return de(l,n,t,e,r,o)(a,d)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return u.values=function(a,d){var i=h(a,d),g=Ze(c,i),f=u.xScale(),p=u.yScale();if("vertical"===s){var m=p(n(a,d));return{origin:[f(r(a,d))+g,m],high:0,upperQuartile:p(e(a,d))-m,median:p(o(a,d))-m,lowerQuartile:p(t(a,d))-m,low:p(l(a,d))-m,width:i}}var y=f(l(a,d));return{origin:[y,p(r(a,d))+g],high:f(n(a,d))-y,upperQuartile:f(e(a,d))-y,median:f(o(a,d))-y,lowerQuartile:f(t(a,d))-y,low:0,width:i}},u.xValues=function(){return"vertical"===s?[r]:[e,t,n,l,o]},u.yValues=function(){return"vertical"===s?[e,t,n,l,o]:[r]},u.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},u.lowerQuartileValue=function(){return arguments.length?(t=Xe(0>=arguments.length?void 0:arguments[0]),u):t},u.upperQuartileValue=function(){return arguments.length?(e=Xe(0>=arguments.length?void 0:arguments[0]),u):e},u.lowValue=function(){return arguments.length?(l=Xe(0>=arguments.length?void 0:arguments[0]),u):l},u.highValue=function(){return arguments.length?(n=Xe(0>=arguments.length?void 0:arguments[0]),u):n},u.crossValue=function(){return arguments.length?(r=Xe(0>=arguments.length?void 0:arguments[0]),u):r},u.medianValue=function(){return arguments.length?(o=Xe(0>=arguments.length?void 0:arguments[0]),u):o},u.bandwidth=function(){return arguments.length?(h=Xe(0>=arguments.length?void 0:arguments[0]),u):h},u.align=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u},Ha=function(){var e=[],t=function(e){return e},n=function(e,t){return t},i=Ke({decorate:function(){},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return i.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},i.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},i.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.key=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i},Fa=function(){var e=Ha(),t=Le("g"),a=Le("g","multi"),n=function(n){n.selection&&(a.transition(n),t.transition(n));var i=e.mapping(),l=e.series(),r=e.xScale(),d=e.yScale();n.each(function(n,s,c){var h=a(o.select(c[s]),l);h.each(function(e,a,s){e.xScale(r).yScale(d);var c=i(n,a,l),h=t(o.select(s[a]),[c]);h.call(e)});var u=h.selection?h.selection():h;u.order(),e.decorate()(h,n,s)})};return Se(n,e),xe(n,a,"key"),n},Ga=function(){var e=null,t=Ha(),a=function(a){var n=t.mapping(),i=t.series(),l=t.xScale(),r=t.yScale();i.forEach(function(o,s){var c=n(a,s,i);o.context(e).xScale(l).yScale(r);var h;o.decorate?(h=o.decorate(),o.decorate(function(e,n,l){t.decorate()(e,a,s),h(e,n,l)})):t.decorate()(e,a,s),o(c),h&&o.decorate(h)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},Se(a,t),a},Ua=function(){var e=null,t=1,a=Ha(),n=function(n){var i=a.mapping(),l=a.series(),r=a.xScale(),o=a.yScale();l.forEach(function(d,s){var c=i(n,s,l);d.context(e).pixelRatio(t).xScale(r).yScale(o);var h;d.decorate?(h=d.decorate(),d.decorate(function(e,t,l){a.decorate()(e,n,s),h(e,t,l)})):a.decorate()(e,n,s),d(c),h&&d.decorate(h)})};return n.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},n.pixelRatio=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},Se(n,a),n},qa=function(){var e=function(){return 50},n="center",l=a.scaleBand(),r=Ke({decorate:function(){},xScale:a.scaleLinear(),yScale:a.scaleLinear()});return r.offsetScaleForDatum=function(a,r,o){var i=e(r,o),d=Ze(n,i),s=i/2;return l.domain(t.range(0,a.length)).range([-s+d,s+d])},r.bandwidth=function(){return arguments.length?(e=Xe(0>=arguments.length?void 0:arguments[0]),r):e},r.align=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},Se(r,l,Ce({paddingInner:"paddingOuter"})),r},Qa=function(e){return e.sort(t.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},ja=function(){var e=function(e){return e.x},n=function(e){return e.y},l=function(e){return e.color},r=function(){return 5},o=function(){return 5},d=s.interpolateViridis,c=Ke({decorate:function(){},defined:function(t,a){return de(e,n,l)(t,a)},xScale:a.scaleIdentity(),yScale:a.scaleIdentity()});return c.pathGenerator=Ne().x(0).y(0),c.colorScale=function(e){var n=e.map(l);return a.scaleLinear().domain([t.min(n),t.max(n)])},c.values=function(t,a){return{x:c.xScale()(e(t,a)),y:c.yScale()(n(t,a)),colorValue:l(t,a),width:o(t,a),height:r(t,a)}},c.xValues=function(){return[e]},c.yValues=function(){return[n]},c.xValue=function(){return arguments.length?(e=Xe(0>=arguments.length?void 0:arguments[0]),c):e},c.yValue=function(){return arguments.length?(n=Xe(0>=arguments.length?void 0:arguments[0]),c):n},c.colorValue=function(){return arguments.length?(l=Xe(0>=arguments.length?void 0:arguments[0]),c):l},c.colorInterpolate=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],c):d},c.xBandwidth=function(){return arguments.length?(o=Xe(0>=arguments.length?void 0:arguments[0]),c):o},c.yBandwidth=function(){return arguments.length?(r=Xe(0>=arguments.length?void 0:arguments[0]),c):r},Se(c,c.pathGenerator,Ce({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),c},Xa=function(e){return"function"==typeof e?e:function(){return e}},Za=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},i=n,l=function(){},r="horizontal",d=Le("g","annotation-line"),s=function(a){if(a.selection&&d.transition(a),"horizontal"!==r&&"vertical"!==r)throw new Error("Invalid orientation");var s="horizontal"===r,c=s?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},h=s?"x2":"y2",u=s?e:t,g=s?t:e,f=s?"left-handle":"bottom-handle",p=s?"right-handle":"top-handle",y=s?"9":"0",m=s?"0":"9",b=s?"0.32em":"0.71em",x=s?"start":"middle",v=u.range(),S=function(){return c(v[0],g(n.apply(void 0,arguments)))},w=v[1]-v[0];a.each(function(e,t,a){var n=d(o.select(a[t]),e),s=n.enter().attr("transform",S).style("stroke","#bbb");s.append("line").attr(h,w),s.append("g").classed(f,!0).style("stroke","none"),s.append("g").classed(p,!0).style("stroke","none").attr("transform",c(w,0)).append("text").attr("text-anchor",x).attr("x",y).attr("y",m).attr("dy",b),n.attr("class","annotation-line ".concat(r)),n.attr("transform",S),n.select("line").attr(h,w),n.select("g."+p).attr("transform",c(w,0)),n.select("text").text(i),l(n,e,t)})};return s.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],s):e},s.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],s):t},s.value=function(){return arguments.length?(n=Xa(0>=arguments.length?void 0:arguments[0]),s):n},s.label=function(){return arguments.length?(i=Xa(0>=arguments.length?void 0:arguments[0]),s):i},s.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],s):r},s},Ka=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n=function(e){return e},l=n,r=function(){},o="horizontal",s=d.line(),c=function(a){if("horizontal"!==o&&"vertical"!==o)throw new Error("Invalid orientation");var c="horizontal"===o,h=s.context(),u=c?e:t,g=c?t:e,f=u.domain(),p=c?9:0,m=c?0:9,b=c?"left":"center",v=c?"middle":"hanging";a.forEach(function(e,t){h.save(),h.beginPath(),h.strokeStyle="#bbb",h.fillStyle="#000",h.textAlign=b,h.textBaseline=v,r(h,e,t),s.context(h)(f.map(function(t){var a=[u(t),g(n(e))];return c?a:a.reverse()}));var a=c?u(f[1]):g(n(e)),i=c?g(n(e)):u(f[1]);h.fillText(l(e),a+p,i+m),h.fill(),h.stroke(),h.closePath(),h.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.value=function(){return arguments.length?(n=Xa(0>=arguments.length?void 0:arguments[0]),c):n},c.label=function(){return arguments.length?(l=Xa(0>=arguments.length?void 0:arguments[0]),c):l},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.orient=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},xe(c,s,"context"),c},$a=function(){var e=a.scaleIdentity(),t=[10],n=null,i=function(){var a;return null==n?e.ticks?(a=e).ticks.apply(a,R(t)):e.domain():n};return i.scale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.ticks=function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=a,i},i.tickArguments=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},i.tickValues=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],i):n},i},Ja=function(e){return e},en=function(e){return e},tn=function(e,t,a,n){return e[t]?e[t].apply(e,a):n},an=function(e){var t;return null!==(t=e.tickValues())&&void 0!==t?t:tn(e.scale(),"ticks",e.tickArguments(),e.scale().domain())},nn=function(e){var t;return null!==(t=e.tickFormat())&&void 0!==t?t:tn(e.scale(),"tickFormat",e.tickArguments(),en)},ln=function(e){return e},rn=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=[10],i=null,l=function(){},r=null,s=6,c=6,h=3,u=d.line(),f=Le("g","tick").key(ln),p=Le("path","domain"),y=function(){return{offset:[0,c+h]}},m=function(){return{path:[[0,0],[0,c]]}},b=a.labelOffset||y,x=a.tickPath||m,v=function(e,t){var a=0;return e.bandwidth&&(a=e.bandwidth()/2,e.round()&&(a=he(a))),function(n){return t(e(n)+a,0)}},S=function(e,t){return V()?"translate(".concat(t,", ").concat(e,")"):"translate(".concat(e,", ").concat(t,")")},w=function(e){return V()?e.map(function(e){return[e[1],e[0]]}):e},V=function(){return"left"===e||"right"===e},k=function a(n){n.selection&&(f.transition(n),p.transition(n)),n.each(function(n,i,r){var d=r[i],c=o.select(d);d.__scale__||c.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===e?"start":"left"===e?"end":"middle");var h=d.__scale__||t;d.__scale__=t.copy();var y=an(a),m=nn(a),k="bottom"===e||"right"===e?1:-1,C=function(e){var t=B(e,2),a=t[0],n=t[1];return[a,k*n]},A=t.range(),_=w([[A[0],k*s],[A[0],0],[A[1],0],[A[1],k*s]]),D=p(c,[n]);D.enter().attr("stroke","#000"),D.attr("d",u(_));var E=f(c,y),g=y.map(function(e,t){return b(e,t,y)}),z=y.map(function(e,t){return x(e,t,y)});E.enter().attr("transform",v(h,S)).append("path").attr("stroke","#000"),E.enter().append("text").attr("transform",function(e,t){return S.apply(void 0,R(C(g[t].offset)))}).attr("fill","#000"),E.exit().attr("transform",v(t,S)),E.select("path").attr("visibility",function(e,t){return z[t].hidden&&"hidden"}).attr("d",function(e,t){return u(w(z[t].path.map(C)))}),E.select("text").attr("visibility",function(e,t){return g[t].hidden&&"hidden"}).attr("transform",function(e,t){return S.apply(void 0,R(C(g[t].offset)))}).attr("dy",function(){var t="0em";return V()?t="0.32em":"bottom"===e&&(t="0.71em"),t}).text(m),E.attr("transform",v(t,S)),l(E,n,i)})};return k.tickFormat=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],k):r},k.tickSize=function(){return arguments.length?(c=s=+(0>=arguments.length?void 0:arguments[0]),k):c},k.tickSizeInner=function(){return arguments.length?(c=+(0>=arguments.length?void 0:arguments[0]),k):c},k.tickSizeOuter=function(){return arguments.length?(s=+(0>=arguments.length?void 0:arguments[0]),k):s},k.tickPadding=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],k):h},k.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],k):l},k.scale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],k):t},k.ticks=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=[].concat(t),k},k.tickArguments=function(){return arguments.length?(n=null==(0>=arguments.length?void 0:arguments[0])?[]:R(0>=arguments.length?void 0:arguments[0]),k):null===n?null:n.slice()},k.tickValues=function(){return arguments.length?(i=null==(0>=arguments.length?void 0:arguments[0])?[]:R(0>=arguments.length?void 0:arguments[0]),k):null===i?null:i.slice()},k.orient=function(){return e},k},on=function e(t,a){var n=!1,i=function(e,t,i){var r=0,o=l.tickSizeInner()+l.tickPadding(),d=!1;if(n){var s=a(e),c=t<i.length-1?a(i[t+1]):a.range()[1];r=(c-s)/2,o=l.tickPadding(),d=t===i.length-1&&s===c}return{offset:[r,o],hidden:d}},l=rn(t,a,{labelOffset:i}),e=function(e){return l(e)};return e.tickCenterLabel=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e):n},Se(e,l),e},dn=function(e){return on("top",e)},sn=function(e){return on("bottom",e)},cn=function(e){return on("left",e)},hn=function(e){return on("right",e)},un=function(e,t){var a=null,n=function(e,a,n){if(t.step)return t.step();var i=t(e);return a<n.length-1?t(n[a+1])/i:2*(t.range()[1]-i)},i=function(e,t,i){var r=0;return r=a?a(e,t):n(e,t,i)/2,{path:[[r,0],[r,l.tickSizeInner()]],hidden:t===i.length-1}},l=rn(e,t,{labelOffset:function(){return{offset:[0,l.tickPadding()]}},tickPath:i}),r=function(e){l(e)};return r.tickOffset=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},Se(r,l),r},gn=function(e){return function(t){var a=an(e),n=nn(e),i=a.map(n),r=t.append("text"),o=i.map(function(e){return r.text(e).node().getBBox()}),d=ye.apply(Math,R(o.map(function(e){return e.height}))),s=ye.apply(Math,R(o.map(function(e){return e.width})));return r.remove(),{maxHeight:d,maxWidth:s,labelCount:i.length}}},fn="__d3fc-elements__",pn=function(e){return e[fn]||{}},yn=function(e,t){e[fn]=t},mn=function(e){return delete e[fn]},bn=function(e){return"D3FC-GROUP"===e.tagName?[e].concat(R(e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[e]},xn=function(e){var t=pn(e),a=t.width,n=t.height,i=e.useDevicePixelRatio&&null!=window.devicePixelRatio?window.devicePixelRatio:1,l=e.clientWidth*i,r=e.clientHeight*i,o=e.children[0];yn(e,{pixelRatio:i,width:l,height:r,resized:l!==a||r!==n,child:o})};if("function"!=typeof CustomEvent)throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var vn=function(e){var t=pn(e),a=new CustomEvent("measure",{detail:t});e.dispatchEvent(a)},Sn=function(e){var t=pn(e),a=new CustomEvent("draw",{detail:t});e.dispatchEvent(a)},wn=function(e){var t=e.map(bn).reduce(function(e,t){return e.concat(t)});t.forEach(xn),t.forEach(vn),t.forEach(Sn)},Vn=function(e){return pn(e.ownerDocument).queue||[]},kn=function(e,t){var a=pn(e.ownerDocument),n=a.requestId;null==n&&(n=requestAnimationFrame(function(){var t=Vn(e);wn(t),Cn(e)})),yn(e.ownerDocument,{queue:t,requestId:n})},Cn=function(e){return mn(e.ownerDocument)},An=function(e,t){var a=e;do if(a.parentNode===t)return!0;while(a=a.parentNode);return!1},_n=function(e){var t=Vn(e),a=-1<t.indexOf(e);if(!a){var n=t.some(function(t){return An(e,t)});if(!n){var i=t.filter(function(t){return!An(t,e)});i.push(e),kn(e,i)}}};if("function"!=typeof HTMLElement)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Dn=function(e){null!=e.__measureListener__||(e.__measureListener__=function(t){return e.setMeasurements(t.detail)},e.addEventListener("measure",e.__measureListener__))},En=function(e){null==e.__measureListener__||(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)},zn=function(e,t){return function(a){function n(){return S(this,n),i.apply(this,arguments)}k(n,a);var i=I(n);return V(n,[{key:"attributeChangedCallback",value:function(e){"use-device-pixel-ratio"===e?this.requestRedraw():void 0}},{key:"connectedCallback",value:function(){0===this.childNodes.length&&this.appendChild(e()),Dn(this)}},{key:"disconnectedCallback",value:function(){En(this)}},{key:"setMeasurements",value:function(e){var a=e.width,n=e.height,i=T(this.childNodes),l=i[0],r=i.slice(1);if(0<r.length)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,l,{width:a,height:n})}},{key:"requestRedraw",value:function(){_n(this)}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&"false"!==this.getAttribute("use-device-pixel-ratio")},set:function(e){e&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!e&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),n}(z(HTMLElement))},Nn=function(e){function t(){return S(this,t),a.apply(this,arguments)}k(t,e);var a=I(t);return V(t,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&"false"!==this.getAttribute("set-webgl-viewport")},set:function(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),t}(zn(function(){return document.createElement("canvas")},function(e,t,a){var n=a.width,i=a.height;if(t.setAttribute("width",n),t.setAttribute("height",i),e.setWebglViewport){var l=t.getContext("webgl");l.viewport(0,0,n,i)}})),Pn=function(e){e.autoResize?In(e):Bn(e)},In=function(e){null!=e.__autoResizeListener__||(e.__autoResizeListener__=function(){return _n(e)},addEventListener("resize",e.__autoResizeListener__))},Bn=function(e){null==e.__autoResizeListener__||(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Tn=function(e){function t(){return S(this,t),a.apply(this,arguments)}k(t,e);var a=I(t);return V(t,[{key:"connectedCallback",value:function(){Pn(this)}},{key:"disconnectedCallback",value:function(){Bn(this)}},{key:"requestRedraw",value:function(){_n(this)}},{key:"attributeChangedCallback",value:function(e){"auto-resize"===e?Pn(this):void 0}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&"false"!==this.getAttribute("auto-resize")},set:function(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),Pn(this)}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),t}(z(HTMLElement)),Rn=zn(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(e,t,a){var n=a.width,i=a.height;t.setAttribute("viewBox","0 0 ".concat(n," ").concat(i))}),Ln="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Mn=document.createElement("style");if(Mn.setAttribute("type","text/css"),document.querySelector("head").appendChild(Mn),Mn.styleSheet?Mn.styleSheet.cssText+=Ln:Mn.textContent+=Ln,"object"!==("undefined"==typeof customElements?"undefined":v(customElements))||"function"!=typeof customElements.define)throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");customElements.define("d3fc-canvas",Nn),customElements.define("d3fc-group",Tn),customElements.define("d3fc-svg",Rn);var Yn=function(){for(var e={},t=function(t){for(var a=0,n=Object.keys(e),i;a<n.length;a++)i=n[a],t[i].apply(null,e[i]);return t},a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];for(var l=function(){var a=o[r];t[a]=function(){for(var n=arguments.length,i=Array(n),l=0;l<n;l++)i[l]=arguments[l];return i.length?(e[a]=i,t):e[a]}},r=0,o=n;r<o.length;r++)l();return t},Wn="d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}\nd3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}\nd3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}\nd3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}\nd3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}\nd3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}\nd3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}",On=document.createElement("style");On.setAttribute("type","text/css"),document.querySelector("head").appendChild(On),On.styleSheet?On.styleSheet.cssText+=Wn:On.textContent+=Wn;var Hn=function(e){return"function"==typeof e?e:function(){return e}},Fn=function(){var e=Gn.apply(void 0,arguments),t=e.xScale,a=e.yScale,n=e.xAxis,i=e.yAxis,l=Hn(""),r=Hn(""),d=Hn(""),s=Hn(null),c=Hn(null),h=Hn("right"),u=Hn("bottom"),g=null,f=null,p=null,y=!1,m=!0,b=Yn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),x=function(){},v=Yn("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=function(){},w=function(){},V=Le("d3fc-group","cartesian-chart"),k=Le("d3fc-canvas","webgl-plot-area"),C=Le("d3fc-canvas","canvas-plot-area"),A=Le("d3fc-svg","svg-plot-area"),_=Le("d3fc-svg","x-axis").key(function(e){return e}),D=Le("d3fc-svg","y-axis").key(function(e){return e}),E=Le("div","chart-label"),z=Le("div","x-label").key(function(e){return e}),N=Le("div","y-label").key(function(e){return e}),P=function(e){return function(t){return e.selection?t.transition(e):t}},I=function(e){var I=P(e);e.each(function(e,P,B){var T=V(o.select(B[P]),[e]);T.enter().attr("auto-resize",""),E(T,[u(e)]).attr("class",function(e){return"top"===e?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(e){return"top"===e?0:"1em"}).style("margin-top",function(e){return"top"===e?"1em":0}).text(l(e)),z(T,[u(e)]).attr("class",function(e){return"x-label ".concat(e,"-label")}).text(r(e)),N(T,[h(e)]).attr("class",function(e){return"y-label ".concat(e,"-label")}).text(d(e)),k(T,g?[e]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",m).on("draw",function(e){var n=o.event.detail,i=n.child,l=n.pixelRatio;g.context(y?null:i.getContext("webgl")).pixelRatio(l).xScale(t).yScale(a),g(e)}),T.select(".webgl-plot-area>canvas").on("webglcontextlost",function(){console.warn("WebGLRenderingContext lost"),o.event.preventDefault(),y=!0,T.node().requestRedraw()}).on("webglcontextrestored",function(){console.info("WebGLRenderingContext restored"),y=!1,T.node().requestRedraw()}),C(T,f?[e]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",m).on("draw",function(e){var n=o.event.detail,i=n.child,l=n.pixelRatio,r=i.getContext("2d");r.save(),m&&r.scale(l,l),f.context(r).xScale(t).yScale(a),f(e),r.restore()}),A(T,p?[e]:[]).classed("plot-area",!0).on("draw",function(e){var n=o.event.detail.child;p.xScale(t).yScale(a),I(o.select(n).datum(e)).call(p)}),_(T,[u(e)]).attr("class",function(e){return"x-axis ".concat(e,"-axis")}).style("height",s(e)).on("measure",function(e){var a=o.event.detail,n=a.width,i=a.height,l=a.child;"top"===e&&o.select(l).attr("viewBox","0 ".concat(-i," ").concat(n," ").concat(i)),t.range([0,n])}).on("draw",function(e){var a=o.event.detail.child,i="top"===e?n.top(t):n.bottom(t);i.decorate(x),I(o.select(a).datum(e)).call(b(i))}),D(T,[h(e)]).attr("class",function(e){return"y-axis ".concat(e,"-axis")}).style("width",c(e)).on("measure",function(e){var t=o.event.detail,n=t.width,i=t.height,l=t.child;"left"===e&&o.select(l).attr("viewBox","".concat(-n," 0 ").concat(n," ").concat(i)),a.range([i,0])}).on("draw",function(e){var t=o.event.detail.child,n="left"===e?i.left(a):i.right(a);n.decorate(S),I(o.select(t).datum(e)).call(v(n))}),T.each(function(e,t,a){return a[t].requestRedraw()}),w(T,e,P)})},B=Ve(/range\w*/,/tickFormat/);return Se(I,t,B,_e("x")),Se(I,a,B,_e("y")),Se(I,b,_e("x")),Se(I,v,_e("y")),I.xOrient=function(){return arguments.length?(u=Hn(0>=arguments.length?void 0:arguments[0]),I):u},I.yOrient=function(){return arguments.length?(h=Hn(0>=arguments.length?void 0:arguments[0]),I):h},I.xDecorate=function(){return arguments.length?(x=0>=arguments.length?void 0:arguments[0],I):x},I.yDecorate=function(){return arguments.length?(S=0>=arguments.length?void 0:arguments[0],I):S},I.chartLabel=function(){return arguments.length?(l=Hn(0>=arguments.length?void 0:arguments[0]),I):l},I.xLabel=function(){return arguments.length?(r=Hn(0>=arguments.length?void 0:arguments[0]),I):r},I.yLabel=function(){return arguments.length?(d=Hn(0>=arguments.length?void 0:arguments[0]),I):d},I.xAxisHeight=function(){return arguments.length?(s=Hn(0>=arguments.length?void 0:arguments[0]),I):s},I.yAxisWidth=function(){return arguments.length?(c=Hn(0>=arguments.length?void 0:arguments[0]),I):c},I.webglPlotArea=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],I):g},I.canvasPlotArea=function(){return arguments.length?(f=0>=arguments.length?void 0:arguments[0],I):f},I.svgPlotArea=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],I):p},I.decorate=function(){return arguments.length?(w=0>=arguments.length?void 0:arguments[0],I):w},I.useDevicePixelRatio=function(){return arguments.length?(m=0>=arguments.length?void 0:arguments[0],I):m},I},Gn=function(){for(var e={xScale:a.scaleIdentity(),yScale:a.scaleIdentity(),xAxis:{bottom:sn,top:dn},yAxis:{right:hn,left:cn}},t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 1!==n.length||n[0].domain||n[0].range?Object.assign(e,{xScale:n[0]||e.xScale,yScale:n[1]||e.yScale}):Object.assign(e,n[0])},Un=function(e){return"function"==typeof e?e:function(){return e}},qn=function(e,t){return function(){var a=Un(""),n=t,i=function(){},l=Fn.apply(void 0,arguments),r=function(t){e(l,n),l.decorate(function(e,t,n){e.enter().select(".x-label").style("height","1em").style("line-height","1em");var r=l.yOrient()(t);e.enter().append("div").attr("class","y-label-container").style("grid-column","left"===r?1:5).style("-ms-grid-column","left"===r?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),e.select(".y-label-container>.y-label").text(a),i(e,t,n)}),t.call(l)};return Se(r,l,ke(/^x/,/^y/,"chartLabel")),r.yLabel=function(){return arguments.length?(a=Un(0>=arguments.length?void 0:arguments[0]),r):a},r.plotArea=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},r.decorate=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],r):i},r}},Qn=qn(function(e,t){return e.svgPlotArea(t)},et),jn=qn(function(e,t){return e.canvasPlotArea(t)},tt),Xn=function(e){return"x"===e?h.brushX():"y"===e?h.brushY():"xy"===e?h.brush():void 0},Zn=function(e){return[e[1],e[0]]},Kn=function(e){var t=Xn(e),n=c.dispatch("brush","start","end"),i=a.scaleIdentity(),l=a.scaleIdentity(),r=Le("g","brush"),d=function(t,a,n){return"x"===e?t.map(a):"y"===e?t.map(n):"xy"===e?[[a(t[0][0]),n(t[0][1])],[a(t[1][0]),n(t[1][1])]]:void 0},s=function(e){return d(e,a.scaleLinear().domain(i.range()).invert,a.scaleLinear().domain(Zn(l.range())).invert)},h=function(e){return d(e,a.scaleLinear().domain(i.range()),a.scaleLinear().domain(Zn(l.range())))},u=function(t){var n=a.scaleLinear().domain(i.domain());return"x"===e?t.map(n.invert):"xy"===e?[n.invert(t[0][0]),n.invert(t[1][0])]:void 0},g=function(t){var n=a.scaleLinear().domain(Zn(l.domain()));return"y"===e?[t[1],t[0]].map(n.invert):"xy"===e?[n.invert(t[1][1]),n.invert(t[0][1])]:void 0},f=function(e){if(!(e.sourceEvent&&"draw"===e.sourceEvent.type))if(e.selection){var t=h(e.selection);n.call(e.type,{},{selection:t,xDomain:u(t),yDomain:g(t)})}else n.call(e.type,{},{})},p=function(e){e.each(function(e,a,n){t.extent([[i.range()[0],l.range()[1]],[i.range()[1],l.range()[0]]]),t.on("end",function(){return f(o.event)}).on("brush",function(){return f(o.event)}).on("start",function(){return f(o.event)});var d=r(o.select(n[a]),[e]);d.call(t).call(t.move,e?s(e):null)})};return p.xScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.yScale=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l},xe(p,n,"on"),xe(p,t,"filter","handleSize"),p};e.annotationCanvasBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",l=function(e){return e.from},r=function(e){return e.to},o=function(){},s=Ne().horizontalAlign("right").verticalAlign("top"),c=function(a){if("horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c=s.context(),h="horizontal"===n,u=h?e:t,g=h?t:e,f=u.range(),p=f[1]-f[0],y=h?"x":"y",m=h?"y":"x",b=h?"height":"width",x=h?"width":"height";a.forEach(function(e,t){c.save(),c.beginPath(),c.strokeStyle="transparent",s[m](g(l(e))),s[y](f[0]),s[x](p),s[b](g(r(e))-g(l(e))),o(c,e,t),s.context(c)([e],t),c.fill(),c.stroke(),c.closePath(),c.restore()})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],c):o},c.fromValue=function(){return arguments.length?(l=Xa(0>=arguments.length?void 0:arguments[0]),c):l},c.toValue=function(){return arguments.length?(r=Xa(0>=arguments.length?void 0:arguments[0]),c):r},xe(c,s,"context"),c},e.annotationCanvasCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=Ta(),r=Ka(),o=Ka().orient("vertical"),s=a.scaleIdentity(),c=a.scaleIdentity(),h=Ga().series([r,o,l]).xScale(s).yScale(c).mapping(function(e){return[e]}),u=function(a){a.forEach(function(a){s.range(n.range()),c.range(i.range()),l.crossValue(e).mainValue(t),r.value(t),o.value(e),h(a)})};u.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],u):e},u.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],u):n},u.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],u):i};var g=ke("label","decorate");return Se(u,r,g,_e("y")),Se(u,o,g,_e("x")),xe(u,l,"decorate"),xe(u,h,"context"),u},e.annotationCanvasGridline=function(){var e=function(){},t=function(){},a=$a(),n=$a(),l=d.line(),r=function(){var r=l.context(),o=a.scale(),s=n.scale();a().forEach(function(t,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",e(r,t,a),l.context(r)(s.domain().map(function(e){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()}),n().forEach(function(e,a){r.save(),r.beginPath(),r.strokeStyle="#bbb",r.fillStyle="transparent",t(r,e,a),l.context(r)(o.domain().map(function(t){return[o(t),s(e)]})),r.fill(),r.stroke(),r.closePath(),r.restore()})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},Se(r,a,_e("x")),Se(r,n,_e("y")),xe(r,l,"context"),r},e.annotationCanvasLine=Ka,e.annotationSvgBand=function(){var e=a.scaleIdentity(),t=a.scaleIdentity(),n="horizontal",i=function(e){return e.from},l=function(e){return e.to},r=function(){},d=Le("g","annotation-band"),s=Ne().horizontalAlign("center").verticalAlign("center").x(0).y(0),c=function(a){if(a.selection&&d.transition(a),"horizontal"!==n&&"vertical"!==n)throw new Error("Invalid orientation");var c="horizontal"===n,h=c?function(e,t){return"translate(".concat(e,", ").concat(t,")")}:function(e,t){return"translate(".concat(t,", ").concat(e,")")},u=c?e:t,g=c?t:e,f=u.range(),p=f[1]-f[0],y=c?"height":"width",m=c?"width":"height",b=function(){return h((f[1]+f[0])/2,(g(l.apply(void 0,arguments))+g(i.apply(void 0,arguments)))/2)};s[m](p),s[y](function(){return g(l.apply(void 0,arguments))-g(i.apply(void 0,arguments))}),a.each(function(e,t,a){var i=d(o.select(a[t]),e);i.enter().attr("transform",b).append("path").classed("band",!0),i.attr("class","annotation-band ".concat(n)).attr("transform",b).select("path").attr("d",function(e,t){return s([e],t)}),r(i,e,t)})};return c.xScale=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],c):e},c.yScale=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],c):n},c.decorate=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],c):r},c.fromValue=function(){return arguments.length?(i=Xa(0>=arguments.length?void 0:arguments[0]),c):i},c.toValue=function(){return arguments.length?(l=Xa(0>=arguments.length?void 0:arguments[0]),c):l},c},e.annotationSvgCrosshair=function(){var e=function(e){return e.x},t=function(e){return e.y},n=a.scaleIdentity(),i=a.scaleIdentity(),l=function(){},r=Le("g","annotation-crosshair"),d=Ba(),s=Za(),c=Za().orient("vertical"),h=a.scaleIdentity(),u=a.scaleIdentity(),f=Fa().series([s,c,d]).xScale(h).yScale(u).mapping(function(e){return[e]}),p=function(a){a.selection&&r.transition(a),a.each(function(a,p,y){var m=r(o.select(y[p]),a);m.enter().style("pointer-events","none"),h.range(n.range()),u.range(i.range()),d.crossValue(e).mainValue(t),s.value(t),c.value(e),m.call(f),l(m,a,p)})};p.x=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],p):e},p.y=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],p):t},p.xScale=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],p):n},p.yScale=function(){return arguments.length?(i=0>=arguments.length?void 0:arguments[0],p):i},p.decorate=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],p):l};var m=ke("label");return Se(p,s,m,_e("y")),Se(p,c,m,_e("x")),p},e.annotationSvgGridline=function(){var e=function(){},t=function(){},a=$a(),n=$a(),i=Le("line","gridline-y").key(Ja),l=Le("line","gridline-x").key(Ja),r=function(r){r.selection&&(i.transition(r),l.transition(r)),r.each(function(r,d,s){var c=s[d],h=o.select(s[d]),u=a.scale(),g=n.scale(),f=c.__x_scale__||u;c.__x_scale__=u.copy();var p=a(),y=i(h,p);y.enter().attr("x1",f).attr("x2",f).attr("y1",g.range()[0]).attr("y2",g.range()[1]).attr("stroke","#bbb"),y.attr("x1",u).attr("x2",u).attr("y1",g.range()[0]).attr("y2",g.range()[1]),y.exit().attr("x1",u).attr("x2",u),e(y,p,d);var m=c.__y_scale__||g;c.__y_scale__=g.copy();var b=n(),x=l(h,b);x.enter().attr("y1",m).attr("y2",m).attr("x1",u.range()[0]).attr("x2",u.range()[1]).attr("stroke","#bbb"),x.attr("y1",g).attr("y2",g).attr("x1",u.range()[0]).attr("x2",u.range()[1]),x.exit().attr("y1",g).attr("y2",g),t(x,b,d)})};return r.yDecorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.xDecorate=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},Se(r,i,Ce({key:"xKey"})),Se(r,l,Ce({key:"yKey"})),Se(r,a,_e("x")),Se(r,n,_e("y")),r},e.annotationSvgLine=Za,e.autoBandwidth=function(e){var a=.75,n=function(e){if(1>=e.length)return 10;e=Qa(e);var n=t.pairs(e).map(function(e){return me(e[0]-e[1])}),i=t.min(n);return a*i},i=function(t,a,i){if(t.bandwidth)return t.bandwidth();var l=Array.isArray(a)?(d=[]).concat.apply(d,R(a)):a,r=l.filter(e.defined()).map(i()).map(t),o=n(r),d;return o},l=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(i(e.xScale(),t,e.xValue)),e.yBandwidth(i(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(i(a,t,e.crossValue))}};t instanceof o.selection?t.each(function(t,n,i){a(t),e(o.select(i[n]))}):(a(t),e(t))};return Se(l,e),l.widthFraction=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l},e.axisBottom=sn,e.axisLabelOffset=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},l=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},r=function(a){var i=gn(e)(a),r=i.maxHeight,o=i.maxWidth,d=i.labelCount,s=e.scale().range()[1],c="auto"===t?ue((n()?r:o)*d/s)+1:t,h=a.select("text"),u=h.attr("transform"),g=function(e){return n()?"translate(".concat(e%c*o*l(),", 0)"):"translate(0, ".concat(e%c*r*l(),")")};h.attr("transform",function(e,t){return"".concat(u," ").concat(g(t))})},o=function(t){return e(t)};return e.decorate(function(e){r(e),a(e)}),o.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],o):a},o.labelOffsetDepth=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],o):t},Se(o,e,Ve("decorate")),o},e.axisLabelRotate=function(e){var t="auto",a=function(){},n=function(){return"left"===e.orient()||"right"===e.orient()},i=function(){return"top"===e.orient()||"left"===e.orient()?-1:1},l=function(){switch(e.orient()){case"top":case"right":return"start";default:return"end";}},r=function(a){var r=gn(e)(a),o=r.maxHeight,d=r.maxWidth,s=r.labelCount,c=s*d,h;if("auto"===t){var u=e.scale().range()[1];h=u<c?90*ge(1,(c/u-.8)/2):0}else h=t;return{rotate:n()?ue(i()*(90-h)):ue(-h),maxHeight:o,maxWidth:d,anchor:h?l():"middle"}},o=function(e){var t=r(e),a=t.rotate,l=t.maxHeight,o=t.anchor,d=e.select("text"),s=d.attr("transform"),c=i()*ue(l/2),h=n()?"translate(".concat(c,", 0)"):"translate(0, ".concat(c,")");d.style("text-anchor",o).attr("transform","".concat(s," ").concat(h," rotate(").concat(a," 0 0)"))},d=function(t){e(t)};return e.decorate(function(e){o(e),a(e)}),d.decorate=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],d):a},d.labelRotate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],d):t},Se(d,e,Ve("decorate")),d},e.axisLeft=cn,e.axisOrdinalBottom=function(e){return un("bottom",e)},e.axisOrdinalLeft=function(e){return un("left",e)},e.axisOrdinalRight=function(e){return un("right",e)},e.axisOrdinalTop=function(e){return un("top",e)},e.axisRight=hn,e.axisTop=dn,e.brush=function(){return Kn("xy")},e.brushX=function(){return Kn("x")},e.brushY=function(){return Kn("y")},e.bucket=ie,e.chartCanvasCartesian=jn,e.chartCartesian=Fn,e.chartSvgCartesian=Qn,e.dataJoin=Le,e.discontinuityIdentity=X,e.discontinuityRange=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=function(e,t){return e>t[0]&&e<t[1]},i=function(e,t){return e[0]>=t[0]&&e[1]<=t[1]},l={};l.distance=function(e,a){e=l.clampUp(e),a=l.clampDown(a);var n=t.filter(function(t){return i(t,[e,a])}),r=n.map(function(e){return e[1]-e[0]});return a-e-r.reduce(function(e,t){return e+t},0)};var r=function(e,t){return e instanceof Date?new Date(e.getTime()+t):e+t};return l.offset=function(e,a){if(0<a){var n=function(){for(var n=l.clampUp(e),i=a,o;0<i;)if(o=t.filter(function(e){return e[0]>n}).sort(function(e,t){return e[0]-t[0]}),o.length){var d=o[0],s=d[0]-n;s>i?(n=r(n,i),i=0):(n=d[1],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===v(n))return n.v}else{var i=function(){for(var n=l.clampDown(e),i=a,o;0>i;)if(o=t.filter(function(e){return e[1]<n}).sort(function(e,t){return t[0]-e[0]}),o.length){var d=o[0],s=d[1]-n;s<i?(n=r(n,i),i=0):(n=d[0],i-=s)}else n=r(n,i),i=0;return{v:n}}();if("object"===v(i))return i.v}},l.clampUp=function(e){return t.reduce(function(e,t){return n(e,t)?t[1]:e},e)},l.clampDown=function(e){return t.reduce(function(e,t){return n(e,t)?t[0]:e},e)},l.copy=function(){return l},l},e.discontinuitySkipUtcWeekends=function(){return De(function(e){return e.getUTCDay()},n.utcDay,n.utcSaturday,n.utcMonday)},e.discontinuitySkipWeekends=function(){return De(function(e){return e.getDay()},n.timeDay,n.timeSaturday,n.timeMonday)},e.effectivelyZero=Re,e.exclude=Ve,e.extentDate=J,e.extentLinear=$,e.extentTime=J,e.feedGdax=ne,e.group=function(){var e="",t="vertical",a=function(e,t){return+e[t]},n=function(t){return Object.keys(t[0]).filter(function(t){return t!==e}).map(function(n){var i=t.filter(function(e){return e[n]}).map(function(t){var i=[t[e],a(t,n)];return i.data=t,i});return i.key=n,i})},i=function(t){return t.map(function(t){var n=Object.keys(t).filter(function(t){return t!==e}).map(function(e){var n=[e,a(t,e)];return n.data=t,n});return n.key=t[e],n})},l=function(e){return"vertical"===t?n(e):i(e)};return l.key=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.orient=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l},e.include=ke,e.includeMap=Ce,e.indicatorBollingerBands=m,e.indicatorElderRay=j,e.indicatorEnvelope=Q,e.indicatorExponentialMovingAverage=b,e.indicatorForceIndex=function(){var e=function(e){return e.volume},t=function(e){return e.close},a=b().period(13),n=y().period(2).defined(function(a){return null!=t(a)&&null!=e(a)}).accumulator(function(a){return a&&p((t(a[1])-t(a[0]))*e(a[1]))}),i=function(e){var t=n(e);return a(t)};return i.volumeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],i):e},i.closeValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],i):t},xe(i,a,"period"),i},e.indicatorMacd=x,e.indicatorMovingAverage=q,e.indicatorRelativeStrengthIndex=function(){var e=y().period(14),a=function(e,t){return t+(e[e.length-1]-t)/e.length},n=function(e){var t=B(e,2),a=t[0],n=t[1];return a<n?0:a-n},i=function(e){var t=B(e,2),a=t[0],n=t[1];return a>n?0:n-a},l=function(e,n){return void 0===n?t.mean(e):a(e,n)},r=function(){var e,a,r;return function(o){if(!o)return void(void 0!==e&&(e=NaN));if(void 0===e)return void(e=o[0]);var d=t.pairs([e].concat(R(o)));a=l(d.map(n),a),r=l(d.map(i),r);var s=isNaN(e)?NaN:r/a;return p(100-100/(1+s))}},o=function(t){var a=r();return e.accumulator(a),e(t)};return xe(o,e,"period","value"),o},e.indicatorStochasticOscillator=function(){var e=function(e){return e.close},a=function(e){return e.high},n=function(e){return e.low},i=y().period(5).defined(function(t){return null!=e(t)&&null!=a(t)&&null!=n(t)}).accumulator(function(i){var l=i&&t.max(i,a),r=i&&t.min(i,n),o=i&&100*(e(i[i.length-1])-r)/(l-r);return p(o)}),l=q().period(3),r=function(e){var t=i(e),a=l(t);return t.map(function(e,t){return{k:e,d:a[t]}})};return r.closeValue=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},r.highValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],r):a},r.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],r):n},Se(r,i,Ce({period:"kPeriod"})),Se(r,l,Ce({period:"dPeriod"})),r},e.largestTriangleOneBucket=le,e.largestTriangleThreeBucket=re,e.layoutAnnealing=function(){var e=1e3,t=1,a=function(e){switch(e.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return e.width*e.height/8;}return e.width*e.height/4},n=function(e){return r?e.width*e.height-Ye(e,r):0},i=function(e,t,i){return We(i,t)+n(e)+a(e)},l=function(a){for(var n=e,l=function(e,t){return pe((t-e)/n)>Math.random()},r=Ue().locationScore(i).winningScore(l).rectangles(a);0<n;){var o=Qe(a),d=qe(He(a[o]));r=r(d,o),n-=t}return r.rectangles()},r;return l.temperature=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.cooling=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.bounds=function(){return arguments.length?(r=0>=arguments.length?void 0:arguments[0],l):r},l},e.layoutBoundingBox=function(){var e=[0,0],t=function(t){return t.map(function(t){var a=t.x,n=t.y;return a+t.width>e[0]&&(a-=t.width),n+t.height>e[1]&&(n-=t.height),{height:t.height,width:t.width,x:a,y:n}})};return t.bounds=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],t):e},t},e.layoutGreedy=function(){var e=function(e){return n?e.width*e.height-Ye(e,n):0},t=function(t,a,n){return We(n,a)+e(t)},a=function(e){var a=Ue().locationScore(t).rectangles(e);return e.forEach(function(e,t){He(e).forEach(function(e){a=a(e,t)})}),a.rectangles()},n;return a.bounds=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],a):n},a},e.layoutLabel=function(e){var t=function(){},n=function(){return[0,0]},l=function(e){return[e.x,e.y]},r=e||function(e){return e},d=function(){},s=a.scaleIdentity(),c=a.scaleIdentity(),h=Le("g","label"),u=function(e){e.each(function(e,a,i){var u=h(o.select(i[a]),e).call(d),g=u.nodes(),f=g.map(function(e,t){var a=o.select(e).datum(),i=l(a,t,g),r=[s(i[0]),c(i[1])],d=n(a,t,g);return{hidden:!1,x:r[0],y:r[1],width:d[0],height:d[1]}}),p=r(f);u.attr("style",function(e,t){return"display:"+(p[t].hidden?"none":"inherit")}).attr("transform",function(e,t){return"translate("+p[t].x+", "+p[t].y+")"}).attr("layout-width",function(e,t){return p[t].width}).attr("layout-height",function(e,t){return p[t].height}).attr("anchor-x",function(e,t){return f[t].x-p[t].x}).attr("anchor-y",function(e,t){return f[t].y-p[t].y}),u.call(d),t(u,e,a)})};return Se(u,h,ke("key")),Se(u,r),u.size=function(){return arguments.length?(n=Te(0>=arguments.length?void 0:arguments[0]),u):n},u.position=function(){return arguments.length?(l=Te(0>=arguments.length?void 0:arguments[0]),u):l},u.component=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},u.decorate=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},u.yScale=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],u):c},u},e.layoutRemoveOverlaps=function(e){e=e||function(e){return e};var t=function(t){t=e(t);for(var a=function(){var e=t.filter(function(e){return!e.hidden}),a=e.map(function(t,a){return[t,We(e,a)]}),n=je(a,function(e,t){return t[1]-e[1]});return 0<n[1]?void(n[0].hidden=!0):"break"},n;n=a(),"break"!==n;);return t};return Se(t,e),t},e.layoutTextLabel=function(){var e=2,t=function(e){return e},a=Le("text"),n=Le("rect"),i=Le("circle"),l=function(l){l.each(function(l,r,d){var s=d[r],c=o.select(s),h=+s.getAttribute("layout-width"),u=+s.getAttribute("layout-height"),g=n(c,[l]);g.attr("width",h).attr("height",u);var f=+s.getAttribute("anchor-x"),p=+s.getAttribute("anchor-y"),y=i(c,[l]);y.attr("r",2).attr("cx",f).attr("cy",p);var m=a(c,[l]);m.enter().attr("dy","0.9em").attr("transform","translate(".concat(e,", ").concat(e,")")),m.text(t)})};return l.padding=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l.value=function(){return arguments.length?(t=Te(0>=arguments.length?void 0:arguments[0]),l):t},l},e.modeMedian=oe,e.pointer=function(){function e(){var e=o.mouse(this);a.call("point",this,[{x:e[0],y:e[1]}])}function t(){void a.call("point",this,[])}var a=c.dispatch("point"),n=function(a){a.on("mouseenter.pointer",e).on("mousemove.pointer",e).on("mouseleave.pointer",t)};return xe(n,a,"on"),n},e.prefix=_e,e.randomFinancial=ae,e.randomGeometricBrownianMotion=ee,e.randomSkipWeekends=function(e){var t=e.date.getDay();return 0!==t&&6!==t},e.rebind=xe,e.rebindAll=Se,e.scaleDiscontinuous=K,e.seriesCanvasArea=function(){var e=$e(),t=d.area(),a=function(a){var n=t.context();t.defined(e.defined());var l=a.map(e.values);t.x(function(e,t){return l[t].transposedX}).y(function(e,t){return l[t].transposedY});var r="vertical"===e.orient()?"y":"x";t[r+"0"](function(e,t){return l[t].y0}),t[r+"1"](function(e,t){return l[t].y}),n.beginPath(),n.fillStyle=Je.gray,n.strokeStyle="transparent",e.decorate()(n,a),t(a),n.fill(),n.stroke(),n.closePath()};return Se(a,e,Ve("bandwidth","align")),xe(a,t,"curve","context"),a},e.seriesCanvasBar=function(){var e=$e(),t=Ne().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},n=function(t){return"vertical"===e.orient()?t.width:t.height},i=function(i){var l=t.context(),r=i.filter(e.defined()),o=r.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),o.forEach(function(r,o){l.save(),l.beginPath(),l.translate(r.origin[0],r.origin[1]),l.fillStyle=Je.darkGray,l.strokeStyle="transparent",e.decorate()(l,r.d,o),a(t)(-r.height),n(t)(r.width),t([r]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return Se(i,e),xe(i,t,"context"),i},e.seriesCanvasBoxPlot=function(){var e=Oa(),t=Ie().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.fillStyle=Je.gray,l.strokeStyle=Je.black,e.decorate()(l,a,n),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return Se(a,e),xe(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return Ya(Pe())},e.seriesCanvasErrorBar=function(){var e=Ra(),t=Be().value(0),a=function(a){var n=a.filter(e.defined()),l=t.context();t.orient(e.orient()),n.forEach(function(a,n){l.save();var i=e.values(a,n);l.translate(i.origin[0],i.origin[1]),l.beginPath(),l.strokeStyle=Je.black,l.fillStyle=Je.gray,e.decorate()(l,a,n),t.high(i.high).width(i.width).low(i.low)([a]),l.fill(),l.stroke(),l.closePath(),l.restore()})};return Se(a,e),xe(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=qa(),a=function(a){a.forEach(function(n,l){var r="horizontal"!==e.orient(),o=function(e,n){var i=t.offsetScaleForDatum(a,e,n),o=r?t.xScale():t.yScale();return o(e)+i(l)+i.bandwidth()/2};r?(e.xScale(o),e.yScale(t.yScale())):(e.yScale(o),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,n){return t.offsetScaleForDatum(a,e,n).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),e(n)})};return Se(a,e,Ve("decorate","xScale","yScale")),Se(a,t,Ve("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=ja(),t=function(t){var a=t.filter(e.defined()),n=e.colorInterpolate(),l=e.colorScale(a),r=e.pathGenerator.context();a.forEach(function(t,a){r.save(),r.beginPath();var i=e.values(t,a);r.translate(i.x,i.y),r.fillStyle=n(l(i.colorValue)),r.strokeStyle="transparent",e.decorate()(r,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return xe(t,e.pathGenerator,"context"),Se(t,e),t},e.seriesCanvasLine=tt,e.seriesCanvasMulti=Ga,e.seriesCanvasOhlc=function(){return Ya(ze())},e.seriesCanvasPoint=Ta,e.seriesCanvasRepeat=function(){var e="vertical",t=tt(),a=Ga(),n=function(n){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),a(n)};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},Se(n,a,Ve("series","mapping")),n},e.seriesSvgArea=function(){var e=$e(),t=d.area(),a=Le("path","area"),n=function(n){n.selection&&a.transition(n),t.defined(e.defined()),n.each(function(n,i,l){var r=n.map(e.values);t.x(function(e,t){return r[t].transposedX}).y(function(e,t){return r[t].transposedY});var d="vertical"===e.orient()?"y":"x";t[d+"0"](function(e,t){return r[t].y0}),t[d+"1"](function(e,t){return r[t].y});var s=a(o.select(l[i]),[n]);s.enter().attr("fill",Je.gray),s.attr("d",t),e.decorate()(s,n,i)})};return Se(n,e,Ve("bandwidth","align")),xe(n,a,"key"),xe(n,t,"curve"),n},e.seriesSvgBar=function(){var e=Ne().x(0).y(0),t=$e(),a=Le("g","bar"),n=function(e){return"vertical"===t.orient()?e.height:e.width},l=function(e){return"vertical"===t.orient()?e.width:e.height},r=function(e){return"translate("+e[0]+", "+e[1]+")"},d=function(i){i.selection&&a.transition(i),i.each(function(i,d,s){var c=t.orient();if("vertical"!==c&&"horizontal"!==c)throw new Error("The bar series does not support an orientation of "+c);var h=i.filter(t.defined()),u=h.map(t.values);e.width(0).height(0),"vertical"===t.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var f=a(o.select(s[d]),h);f.enter().attr("transform",function(e,t){return r(u[t].baseOrigin)}).attr("class","bar "+t.orient()).attr("fill",Je.darkGray).append("path").attr("d",function(t,a){return l(e)(u[a].width),e([t])}),f.attr("transform",function(e,t){return r(u[t].origin)}).select("path").attr("d",function(t,a){return l(e)(u[a].width),n(e)(-u[a].height),e([t])}),t.decorate()(f,h,d)})};return Se(d,t),xe(d,a,"key"),d},e.seriesSvgBoxPlot=function(){var e=Oa(),t=Le("g","box-plot"),a=Ie().value(0),n=function(e){return function(t){return e.selection?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){i.selection&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=t(o.select(d[i]),s);c.enter().attr("stroke",Je.black).attr("fill",Je.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),c.each(function(t,n,i){var d=e.values(t,n);a.median(d.median).upperQuartile(d.upperQuartile).lowerQuartile(d.lowerQuartile).width(d.width).high(d.high).low(d.low),r(o.select(i[n])).attr("transform",l(d)).select("path").attr("d",a([t]))}),e.decorate()(c,n,i)})};return Se(r,e),xe(r,t,"key"),xe(r,a,"cap"),r},e.seriesSvgCandlestick=function(){return Ma(Pe(),"candlestick")},e.seriesSvgErrorBar=function(){var e=Ra(),t=Le("g","error-bar"),a=Be().value(0),n=function(e){return function(t){return e.selection?t.transition(e):t}},l=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},r=function(i){i.selection&&t.transition(i);var r=n(i);i.each(function(n,i,d){var s=n.filter(e.defined()),c=s.map(e.values),h=t(o.select(d[i]),s);h.enter().attr("stroke",Je.black).attr("fill",Je.gray).attr("transform",function(t,a){return l(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),a.orient(e.orient()),h.each(function(e,t,n){var i=c[t];a.high(i.high).low(i.low).width(i.width),r(o.select(n[t])).attr("transform",l(i)+" scale(1)").select("path").attr("d",a([e]))}),e.decorate()(h,n,i)})};return Se(r,e),xe(r,t,"key"),r},e.seriesSvgGrouped=function(e){var t=qa(),a=Le("g","grouped"),n=function(n){n.selection&&a.transition(n),n.each(function(n,i,l){var r=a(o.select(l[i]),n);r.enter().append("g"),r.select("g").each(function(a,l,r){var d=o.select(r[l]),s="horizontal"!==e.orient(),c=function(e,a){var i=t.offsetScaleForDatum(n,e,a),r=s?t.xScale():t.yScale();return r(e)+i(l)+i.bandwidth()/2};s?(e.xScale(c),e.yScale(t.yScale())):(e.yScale(c),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,a){return t.offsetScaleForDatum(n,e,a).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,l)}),d.call(e)})})};return Se(n,e,Ve("decorate","xScale","yScale")),Se(n,t,Ve("offsetScaleForDatum")),n},e.seriesSvgHeatmap=function(){var e=ja(),t=Le("g","box"),a=function(e){return"translate("+e.x+", "+e.y+")"},n=function(n){n.each(function(n,i,l){var r=n.filter(e.defined()),s=e.colorValue(),c=e.colorInterpolate(),h=e.colorScale(r),u=t(o.select(l[i]),r);u.enter().append("path").attr("stroke","transparent"),u.attr("transform",function(t,n){return a(e.values(t,n))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return c(h(s(e,t)))}),e.decorate()(u,n,i)})};return Se(n,e),n},e.seriesSvgLine=et,e.seriesSvgMulti=Fa,e.seriesSvgOhlc=function(){return Ma(ze(),"ohlc")},e.seriesSvgPoint=Ba,e.seriesSvgRepeat=function(){var e="vertical",t=et(),a=Fa(),n=function(n){return n.each(function(n,i,l){"vertical"===e?a.series(n[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(n.map(function(){return t})).mapping(function(e,t){return e[t]}),o.select(l[i]).call(a)})};return n.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n):e},Se(n,a,Ve("series","mapping")),n},e.seriesWebglArea=function(){var e=$e(),t=ga(0,1),a=t.offset(1),n=ga(0,1),i=n.offset(1),l=ga(0,1),r=l.offset(1),o=ga(0,1).type(Gt.UNSIGNED_BYTE),d=o.offset(1),s=Zt().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(n).mainNextValueAttribute(i).baseValueAttribute(l).baseNextValueAttribute(r).definedAttribute(o).definedNextAttribute(d),c=function(){return!1},h=ka,u=[],g=null,f=null,p=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=h(e.xScale()),p=h(e.yScale()),y=!c(u,a);y&&(u=a,o.value(function(t,a){return e.defined()(t,a)}).data(a)),(y||r.scale!==g)&&(g=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),(y||p.scale!==f)&&(f=p.scale,l.value(function(t,a){return p.scale(e.baseValue()(t,a))}).data(a),n.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(a)),s.xScale(r.webglScale).yScale(p.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),s(a.length)};return p.equals=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],p):c},p.scaleMapper=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],p):h},Se(p,e,Ve("bandwidth","align")),xe(p,s,"context","pixelRatio"),p},e.seriesWebglBar=function(){var e=$e(),t=jt(),a=jt(),n=jt(),i=jt().type(Gt.UNSIGNED_SHORT),l=jt().type(Gt.UNSIGNED_BYTE),r=ra().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=ka,s=[],c=null,h=null,u=function(u){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var g=d(e.xScale()),f=d(e.yScale()),p=!o(s,u);p&&(s=u,i.value(function(t,a){return e.bandwidth()(t,a)}).data(u),l.value(function(t,a){return e.defined()(t,a)}).data(u)),(p||g.scale!==c)&&(c=g.scale,t.value(function(t,a){return g.scale(e.crossValue()(t,a))}).data(u)),(p||f.scale!==h)&&(h=f.scale,n.value(function(t,a){return f.scale(e.baseValue()(t,a))}).data(u),a.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(u)),r.xScale(g.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,u,0)}),r(u.length)};return u.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],u):o},u.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},Se(u,e,Ve("align")),xe(u,r,"context","pixelRatio"),u},e.seriesWebglBoxPlot=function(){var e=Oa(),t=jt(),a=jt(),n=jt(),i=jt(),l=jt(),r=jt(),o=jt().type(Gt.UNSIGNED_SHORT),d=jt().type(Gt.UNSIGNED_SHORT),s=jt().type(Gt.UNSIGNED_BYTE),c=ua().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(n).medianValueAttribute(i).lowerQuartileValueAttribute(l).lowValueAttribute(r).bandwidthAttribute(o).capAttribute(d).definedAttribute(s),h=function(){return!1},u=ka,g=[],f=null,p=null,y=Xe(20),m=function(m){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var b=u(e.xScale()),x=u(e.yScale()),v=!h(g,m);v&&(g=m,o.value(function(t,a){return e.bandwidth()(t,a)}).data(m),d.value(function(e,t){return y(e,t)}).data(m),s.value(function(t,a){return e.defined()(t,a)}).data(m)),(v||b.scale!==f)&&(f=b.scale,t.value(function(t,a){return b.scale(e.crossValue()(t,a))}).data(m)),(v||x.scale!==p)&&(p=x.scale,a.value(function(t,a){return x.scale(e.highValue()(t,a))}).data(m),n.value(function(t,a){return x.scale(e.upperQuartileValue()(t,a))}).data(m),i.value(function(t,a){return x.scale(e.medianValue()(t,a))}).data(m),l.value(function(t,a){return x.scale(e.lowerQuartileValue()(t,a))}).data(m),r.value(function(t,a){return x.scale(e.lowValue()(t,a))}).data(m)),c.xScale(b.webglScale).yScale(x.webglScale).decorate(function(t){return e.decorate()(t,m,0)}),c(m.length)};return m.cap=function(){return arguments.length?(y=Xe(0>=arguments.length?void 0:arguments[0]),m):y},m.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],m):h},m.scaleMapper=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],m):u},Se(m,e,Ve("align")),xe(m,c,"context","lineWidth","pixelRatio"),m},e.seriesWebglCandlestick=function(){return Wa(ca())},e.seriesWebglErrorBar=function(){var e=Ra(),t=jt(),a=jt(),n=jt(),i=jt().type(Gt.UNSIGNED_SHORT),l=jt().type(Gt.UNSIGNED_BYTE),r=da().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(n).bandwidthAttribute(i).definedAttribute(l),o=function(){return!1},d=ka,s=[],c=null,h=null,u=function(u){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var g=d(e.xScale()),f=d(e.yScale()),p=!o(s,u);p&&(s=u,i.value(function(t,a){return e.bandwidth()(t,a)}).data(u),l.value(function(t,a){return e.defined()(t,a)}).data(u)),(p||g.scale!==c)&&(c=g.scale,t.value(function(t,a){return g.scale(e.crossValue()(t,a))}).data(u)),(p||f.scale!==h)&&(h=f.scale,a.value(function(t,a){return f.scale(e.highValue()(t,a))}).data(u),n.value(function(t,a){return f.scale(e.lowValue()(t,a))}).data(u)),r.xScale(g.webglScale).yScale(f.webglScale).decorate(function(t){return e.decorate()(t,u,0)}),r(u.length)};return u.equals=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],u):o},u.scaleMapper=function(){return arguments.length?(d=0>=arguments.length?void 0:arguments[0],u):d},Se(u,e,Ve("align")),xe(u,r,"context","lineWidth","pixelRatio"),u},e.seriesWebglLine=Ia,e.seriesWebglMulti=Ua,e.seriesWebglOhlc=function(){return Wa(ia())},e.seriesWebglPoint=function(){var e=$e(),t=Xe(64),a=d.symbolCircle,n=jt(),i=jt(),l=jt().type(Gt.UNSIGNED_SHORT),r=jt().type(Gt.UNSIGNED_BYTE),o=$t().crossValueAttribute(n).mainValueAttribute(i).sizeAttribute(l).definedAttribute(r),s=function(){return!1},c=ka,h=[],u=null,g=null,f=function(d){var f=c(e.xScale()),p=c(e.yScale()),y=!s(h,d);y&&(h=d,l.value(function(e,a){return t(e,a)}).data(d),r.value(function(t,a){return e.defined()(t,a)}).data(d)),(y||f.scale!==u)&&(u=f.scale,"vertical"===e.orient()?n.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(d):n.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(d)),(y||p.scale!==g)&&(g=p.scale,"vertical"===e.orient()?i.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(d):i.value(function(t,a){return p.scale(e.crossValue()(t,a))}).data(d)),o.xScale(f.webglScale).yScale(p.webglScale).type(Na(a)).decorate(function(t){return e.decorate()(t,d,0)}),o(d.length)};return f.size=function(){return arguments.length?(t=Xe(0>=arguments.length?void 0:arguments[0]),f):t},f.type=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],f):a},f.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],f):s},f.scaleMapper=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],f):c},Se(f,e,Ve("baseValue","bandwidth","align")),xe(f,o,"context","pixelRatio"),f},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return Ia()},a=Ua(),n=[],i=function(i){if("vertical"===e){var l=n;n=i[0].map(function(e,a){return a<l.length?l[a]:t()}),a.series(n).mapping(function(e,t){return e.map(function(e){return e[t]})})}else{var r=n;n=i.map(function(e,a){return a<r.length?r[a]:t()}),a.series(n).mapping(function(e,t){return e[t]})}a(i)};return i.series=function(){for(var e=arguments.length,a=Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.length?(t="function"==typeof a[0].xScale&&"function"==typeof a[0].yScale?function(){return a[0]}:a[0],n=[],i):t},i.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],n=[],i):e},Se(i,a,Ve("series","mapping")),i},e.shapeBar=Ne,e.shapeBoxPlot=Ie,e.shapeCandlestick=Pe,e.shapeErrorBar=Be,e.shapeOhlc=ze,e.webglAdjacentAttribute=ga,e.webglAttribute=jt,e.webglBaseAttribute=Ut,e.webglBufferBuilder=nt,e.webglElementIndices=ta,e.webglFillColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=jt().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(ct.header).appendBodyIfNotExists(ct.body),e.fragmentShader().appendHeaderIfNotExists(Wt.header).appendBodyIfNotExists(Wt.body),Array.isArray(a))e.buffers().attribute("aFillColor",Pa(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aFillColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},xe(i,t,"data"),i},e.webglProgramBuilder=rt,e.webglScaleLinear=fa,e.webglScaleLog=pa,e.webglScaleMapper=ka,e.webglScalePow=ya,e.webglSeriesArea=Zt,e.webglSeriesBar=ra,e.webglSeriesBoxPlot=ua,e.webglSeriesCandlestick=ca,e.webglSeriesErrorBar=da,e.webglSeriesLine=aa,e.webglSeriesOhlc=ia,e.webglSeriesPoint=$t,e.webglShaderBuilder=ot,e.webglStrokeColor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0,0,1],t=jt().size(4),a=e,n=!0,i=function(e){if(e.vertexShader().appendHeaderIfNotExists(ht.header).appendBodyIfNotExists(ht.body),e.fragmentShader().appendHeaderIfNotExists(Ot.header).appendBodyIfNotExists(Ot.body),Array.isArray(a))e.buffers().attribute("aStrokeColor",Pa(a).size(4));else if("function"==typeof a){if(!n)return;t.value(a),e.buffers().attribute("aStrokeColor",t)}else throw new Error("Expected value to be an array or function, received ".concat(a));n=!1};return i.value=function(){return arguments.length?(a!==(0>=arguments.length?void 0:arguments[0])&&(a=0>=arguments.length?void 0:arguments[0],n=!0),i):a},xe(i,t,"data"),i},e.webglSymbolMapper=Na,e.webglTypes=Gt,e.webglUniform=it,Object.defineProperty(e,"__esModule",{value:!0})});
